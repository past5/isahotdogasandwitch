<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is a Hot Dog a Sandwich? - The Great Food Debate</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Adding Font Awesome for beautiful icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Playfair+Display:ital,wght@0,700;1,700&display=swap');
        
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --dark: #1A535C;
            --light: #F7FFF7;
            --neutral: #F4F4F4;
            --gray: #6C757D;
            --gradient-primary: linear-gradient(135deg, #FF6B6B, #FF8E53);
            --gradient-secondary: linear-gradient(135deg, #4ECDC4, #2A9D8F);
            --gradient-dark: linear-gradient(135deg, #1A535C, #0B3142);
            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 8px 15px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 15px 30px rgba(0, 0, 0, 0.1);
            --transition-default: all 0.3s ease;
            --border-radius-sm: 8px;
            --border-radius-md: 12px;
            --border-radius-lg: 20px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background-color: var(--light);
            overflow-x: hidden;
            font-size: 16px;
        }
        
        /* Scroll progress bar */
        .progress-container {
            position: fixed;
            top: 0;
            z-index: 1000;
            width: 100%;
            height: 6px;
        }
        
        .progress-bar {
            height: 6px;
            background: var(--gradient-primary);
            width: 0%;
            box-shadow: 0 2px 4px rgba(255, 107, 107, 0.2);
        }

        .hero {
            position: relative;
            background-color: #2b93c0; /* Match the blue background color from the image */
            overflow: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        /* Update these existing styles for better image display */
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            padding: 2.5rem;
            animation: fadeUp 1.2s ease-out;
            text-align: center;
        }
        
        .hero-image {
            max-width: 100%;
            height: auto;
            margin: 0 auto 1.5rem;
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.4));
            display: block;
        }
        
        @media (max-width: 768px) {
            .hero-image {
                max-width: 90%;
            }
        }
        
        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(3.5rem, 10vw, 5.5rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
            line-height: 1.1;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: clamp(1.3rem, 3vw, 1.7rem);
            margin-bottom: 2.5rem;
            font-weight: 400;
            opacity: 0.95;
            line-height: 1.5;
            max-width: 80%;
            color: white;
            margin-left: auto;
            margin-right: auto;
        }
        
        .scroll-down {
            position: absolute;
            bottom: 3rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.5rem;
            color: white;
            animation: bounce 2s infinite;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.8;
        }
        
        .scroll-down:hover {
            opacity: 1;
            transform: translateX(-50%) scale(1.1);
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0) translateX(-50%);
            }
            40% {
                transform: translateY(-20px) translateX(-50%);
            }
            60% {
                transform: translateY(-10px) translateX(-50%);
            }
        }
        
        /* Container styles */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 5rem 2rem;
        }
        
        /* Section styles */
        section {
            margin-bottom: 6rem;
            position: relative;
        }
        
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.2rem, 5vw, 3.2rem);
            margin-bottom: 2.5rem;
            position: relative;
            display: inline-block;
            color: var(--dark);
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100px;
            height: 5px;
            background: var(--gradient-primary);
            border-radius: 2.5px;
        }
        
        /* Card styles */
        .card {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            padding: 2.5rem;
            margin-bottom: 2rem;
            transition: var(--transition-default);
            border: 1px solid rgba(0, 0, 0, 0.03);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-title {
            font-size: 1.7rem;
            color: var(--dark);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--secondary);
            font-weight: 600;
        }
        
        /* Grid layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
        }
        
        /* Debate section styles - IMPROVED FACE-OFF SECTION */
        .debate-section {
            position: relative;
            padding: 6rem 0;
            background-color: var(--neutral);
            background-image: radial-gradient(circle at 20% 80%, rgba(78, 205, 196, 0.1) 0%, transparent 70%),
                            radial-gradient(circle at 80% 20%, rgba(255, 107, 107, 0.1) 0%, transparent 70%);
        }
        
        .vs-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-around;
            margin: 5rem 0;
        }
        
        .debate-item {
            position: relative;
            z-index: 1;
            text-align: center;
            flex: 1;
            padding: 2rem;
            transition: transform 0.4s;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .debate-item:hover {
            transform: translateY(-10px) scale(1.02);
        }
        
        .debate-icon {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background-color: white;
            box-shadow: var(--shadow-md);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-default);
            border: 1px solid rgba(0, 0, 0, 0.03);
            color: var(--dark);
            font-size: 6rem;
            overflow: hidden;
        }
        
        .debate-icon img {
            max-width: 75%;
            max-height: 75%;
            width: auto;
            height: auto;
            object-fit: contain;
        }
        
        .debate-icon.hotdog-icon {
            color: #D35400;
            position: relative;
        }
        
        .debate-icon.sandwich-icon {
            color: #F5CF87;
        }
        
        .debate-item:hover .debate-icon {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .debate-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            font-weight: 700;
            color: var(--dark);
        }
        
        .debate-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--gray);
            max-width: 300px;
            margin: 0 auto;
        }
        
        .vs {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            font-weight: 800;
            color: white;
            background: var(--gradient-primary);
            width: 90px;
            height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            box-shadow: var(--shadow-md);
            z-index: 2;
            border: 6px solid white;
        }
        
        /* Criteria list styles */
        .criteria-list {
            list-style: none;
            margin: 2rem 0;
        }
        
        .criteria-item {
            position: relative;
            padding: 1.2rem 1.2rem 1.2rem 3.5rem;
            margin-bottom: 1rem;
            background-color: white;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-sm);
            transition: var(--transition-default);
            border-left: 3px solid var(--secondary);
        }
        
        .criteria-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-md);
        }
        
        .criteria-item::before {
            content: '✓';
            position: absolute;
            left: 1.2rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .criteria-item-no {
            position: relative;
            padding: 1.2rem 1.2rem 1.2rem 3.5rem;
            margin-bottom: 1rem;
            background-color: white;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-sm);
            transition: var(--transition-default);
            border-left: 3px solid red;
        }

        .criteria-ite-no:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-md);
        }
        
        .criteria-item-no::before {
            content: '✗';
            position: absolute;
            left: 1.2rem;
            top: 50%;
            transform: translateY(-50%);
            color: red;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        /* Data visualization styles */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 2rem 0;
            border-radius: var(--border-radius-md);
            background-color: white;
            padding: 1rem;
            box-shadow: var(--shadow-sm);
        }
        
        /* Verdict section styles */
        .verdict-section {
            padding: 6rem 0;
            text-align: center;
            background-color: var(--dark);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .verdict-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.07;
            z-index: 0;
            filter: saturate(0.8) contrast(1.2);
        }
        
        .verdict-content {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .verdict-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 8vw, 4.2rem);
            margin-bottom: 2.5rem;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .verdict-text {
            font-size: 1.25rem;
            margin-bottom: 2.5rem;
            opacity: 0.95;
            line-height: 1.6;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .verdict-answer {
            font-size: clamp(2.2rem, 6vw, 3.8rem);
            font-weight: 800;
            margin: 3.5rem 0;
            position: relative;
            display: inline-block;
            padding: 1rem 3rem;
            border-radius: var(--border-radius-lg);
            background: rgba(255, 255, 255, 0.08);
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            color: var(--accent);
        }
        
        .verdict-answer::before,
        .verdict-answer::after {
            content: '"';
            font-size: 5rem;
            position: absolute;
            color: var(--accent);
            opacity: 0.3;
            font-family: 'Playfair Display', serif;
        }
        
        .verdict-answer::before {
            left: -1.5rem;
            top: -1.5rem;
        }
        
        .verdict-answer::after {
            right: -1.5rem;
            bottom: -2.5rem;
        }
        
        /* Evidence section styles */
        .evidence-section {
            padding: 6rem 0;
            background-color: var(--light);
        }
        
        .evidence-point {
            margin-bottom: 3rem;
        }
        
        .evidence-heading {
            font-size: 1.6rem;
            margin-bottom: 1rem;
            color: var(--dark);
            font-weight: 600;
        }
        
        .evidence-text {
            margin-bottom: 1.5rem;
            font-size: 1.15rem;
            color: var(--gray);
        }
        
        /* Arguments section styles */
        .arguments-section {
            padding: 6rem 0;
            background-color: var(--neutral);
            background-image: linear-gradient(135deg, rgba(78, 205, 196, 0.05) 0%, rgba(255, 107, 107, 0.05) 100%);
        }
        
        .argument-title {
            font-size: 1.9rem;
            margin-bottom: 2rem;
            text-align: center;
            font-weight: 600;
        }
        
        .arg-for, .arg-against {
            padding: 2.5rem;
            border-radius: var(--border-radius-lg);
            transition: var(--transition-default);
            box-shadow: var(--shadow-md);
        }
        
        .arg-for:hover, .arg-against:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
        }
        
        .arg-for {
            background-color: rgba(78, 205, 196, 0.08);
            border: 2px solid var(--secondary);
        }
        
        .arg-against {
            background-color: rgba(255, 107, 107, 0.08);
            border: 2px solid var(--primary);
        }
        
        .argument-list {
            list-style: none;
        }
        
        .argument-item {
            padding: 1.2rem;
            margin-bottom: 1.2rem;
            border-radius: var(--border-radius-sm);
            background-color: white;
            box-shadow: var(--shadow-sm);
            position: relative;
            padding-left: 3rem;
            transition: var(--transition-default);
        }
        
        .argument-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-md);
        }
        
        .argument-item::before {
            position: absolute;
            left: 1.2rem;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .arg-for .argument-item::before {
            content: '✓';
            color: var(--secondary);
        }
        
        .arg-against .argument-item::before {
            content: '✗';
            color: var(--primary);
        }
        
        /* Interactive elements */
        .hotdog-sandwich-interactive {
            position: relative;
            height: 500px;
            background-color: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            margin: 3rem 0;
            border: 1px solid rgba(0, 0, 0, 0.03);
        }
        
        .hotdog-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 150px;
            transition: transform 0.5s;
        }
        
        .bun-top {
            position: absolute;
            width: 300px;
            height: 60px;
            background-color: #F5CF87;
            border-radius: 90px 90px 0 0;
            top: 0;
            z-index: 1;
            transition: all 0.5s;
        }
        
        .bun-bottom {
            position: absolute;
            width: 300px;
            height: 60px;
            background-color: #F5CF87;
            border-radius: 0 0 90px 90px;
            bottom: 0;
            z-index: 1;
            transition: all 0.5s;
        }
        
        .sausage {
            position: absolute;
            width: 280px;
            height: 40px;
            background-color: #D35400;
            border-radius: 20px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }
        
        .toggle-container {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 10;
        }
        
        .toggle-button {
            padding: 0.9rem 2rem;
            background: var(--gradient-secondary);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.3);
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .toggle-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(78, 205, 196, 0.4);
        }
        
        .toggle-button:active {
            transform: translateY(-1px);
            box-shadow: 0 2px 10px rgba(78, 205, 196, 0.3);
        }
        
        .toggle-label {
            margin-top: 1.2rem;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        /* Controversy meter styles */
        .controversy-meter {
            position: relative;
            height: 35px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            margin: 3.5rem 0;
            overflow: hidden;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
        }
        
        .controversy-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            border-radius: 50px;
            transition: width 1.5s cubic-bezier(0.19, 1, 0.22, 1);
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.3);
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.8rem;
            opacity: 0.9;
            font-size: 1.05rem;
            font-weight: 500;
        }
        
        /* Timeline styles */
        .timeline {
            position: relative;
            max-width: 1200px;
            margin: 5rem auto;
        }
        
        .timeline-item {
            padding: 15px 40px;
            position: relative;
            width: 50%;
            box-sizing: border-box;
        }
        
        .timeline-item::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            right: -17px;
            background-color: var(--light);
            border: 4px solid var(--primary);
            top: 15px;
            border-radius: 50%;
            z-index: 1;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }
        
        .left {
            left: 0;
        }
        
        .right {
            left: 50%;
        }
        
        .right::after {
            left: -17px;
        }
        
        .timeline-content {
            padding: 20px 30px;
            background-color: white;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition-default);
        }
        
        .timeline-content:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .timeline-date {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.8rem;
            font-size: 1.2rem;
        }
        
        .timeline-text {
            margin-bottom: 0;
            color: var(--gray);
            font-size: 1.05rem;
        }
        
        /* CTA section styles */
        .cta-section {
            text-align: center;
            padding: 7rem 0;
            background-color: var(--light);
            position: relative;
            overflow: hidden;
        }
        
        .cta-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 20%, rgba(78, 205, 196, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(255, 107, 107, 0.1) 0%, transparent 50%);
            z-index: 0;
        }
        
        .cta-title {
            font-size: 2.8rem;
            margin-bottom: 1.8rem;
            position: relative;
            z-index: 1;
            color: var(--dark);
            font-weight: 700;
        }
        
        .cta-text {
            font-size: 1.3rem;
            margin-bottom: 3rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            z-index: 1;
            color: var(--gray);
            line-height: 1.6;
        }
        
        .cta-button {
            display: inline-block;
            padding: 1.2rem 3rem;
            background: var(--gradient-primary);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);
            position: relative;
            z-index: 1;
            font-size: 1.1rem;
            border: 2px solid transparent;
            letter-spacing: 0.02em;
        }
        
        .cta-button:hover {
            background: linear-gradient(135deg, #ff5252, #FF8E53);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.5);
        }
        
        .cta-button:active {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }
        
        /* Footer styles */
        footer {
            background: var(--gradient-dark);
            color: white;
            padding: 5rem 0 3rem;
            text-align: center;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .footer-content h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 0.8rem;
        }
        
        .footer-content p {
            opacity: 0.95;
            margin-bottom: 1.8rem;
            line-height: 1.7;
            font-size: 1.05rem;
        }
        
        .research-section {
            margin: 2.5rem 0;
            padding: 2rem;
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: var(--border-radius-md);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(8px);
        }
        
        .research-title {
            font-size: 1.5rem;
            margin-bottom: 1.2rem;
            font-weight: 600;
        }
        
        .research-text {
            margin-bottom: 1.8rem;
            font-size: 1.05rem;
            opacity: 0.95;
            line-height: 1.7;
        }
        
        .github-button {
            display: inline-block;
            padding: 0.9rem 2rem;
            background: var(--gradient-primary);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s;
            margin-bottom: 1.2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            letter-spacing: 0.02em;
        }
        
        .github-button:hover {
            background: linear-gradient(135deg, #ff5252, #FF8E53);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .social-links {
            margin: 2.5rem 0;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }
        
        .social-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
            font-size: 1.2rem;
        }
        
        .social-icon:hover {
            background-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        .copyright {
            opacity: 0.7;
            font-size: 0.95rem;
            margin-top: 2.5rem;
        }
        
        /* Responsive styles */
        @media screen and (max-width: 768px) {
            .vs-container {
                flex-direction: column;
                gap: 6rem;
                margin-top: 3rem;
                margin-bottom: 7rem;
            }
            
            .vs {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                margin: 0;
            }
            
            .timeline::after {
                left: 31px;
            }
            
            .timeline-item {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            
            .timeline-item::after {
                left: 18px;
                right: auto;
            }
            
            .right {
                left: 0;
            }
            
            .card {
                padding: 2rem;
            }
            
            .verdict-answer {
                padding: 0.8rem 1.5rem;
            }
            
            .verdict-answer::before,
            .verdict-answer::after {
                font-size: 3rem;
            }
            
            .verdict-answer::before {
                left: -1rem;
                top: -1rem;
            }
            
            .verdict-answer::after {
                right: -1rem;
                bottom: -1.5rem;
            }
        }
        
        /* Animation classes */
        .fade-in {
            opacity: 0;
            transform: translateY(25px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        
        .fade-in.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        .slide-in-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        
        .slide-in-left.active {
            opacity: 1;
            transform: translateX(0);
        }
        
        .slide-in-right {
            opacity: 0;
            transform: translateX(50px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        
        .slide-in-right.active {
            opacity: 1;
            transform: translateX(0);
        }
        
        .scale-in {
            opacity: 0;
            transform: scale(0.85);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        
        .scale-in.active {
            opacity: 1;
            transform: scale(1);
        }

        /* Data Insights Modal Styles */
        .insights-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: var(--gradient-secondary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
            z-index: 990;
            transition: all 0.3s;
            font-size: 1.4rem;
        }
        
        .insights-button:hover {
            transform: translateY(-3px) scale(1.05);
            background: linear-gradient(135deg, #3bc1b8, #1A8A7E);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
        }
        
        .insights-button i {
            font-size: 24px;
        }
        
        .insights-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
            backdrop-filter: blur(5px);
        }
        
        .insights-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .insights-content {
            width: 90%;
            max-width: 1200px;
            height: 90%;
            background-color: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden; /* Ensure nothing spills out */
            display: flex;
            flex-direction: column;
            position: relative;
            transform: translateY(30px);
            transition: transform 0.4s ease;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
        }
        
        .insights-modal.active .insights-content {
            transform: translateY(0);
        }
        
        .insights-header {
            padding: 1.8rem;
            background: var(--gradient-dark);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .insights-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.9rem;
            margin: 0;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .close-insights {
            font-size: 2.2rem;
            color: white;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.9;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close-insights:hover {
            transform: rotate(90deg);
            background-color: rgba(255, 255, 255, 0.1);
            opacity: 1;
        }
        
        .insights-body {
            padding: 2.5rem;
            overflow-y: auto; /* Allow scrolling inside modal body */
            flex-grow: 1;
            /* Fixed height calculation to prevent growing */
            height: calc(90vh - 5rem); /* Subtract header height */
            max-height: calc(90vh - 5rem);
            overscroll-behavior: contain;
        }
        
        .insights-section {
            margin-bottom: 3.5rem;
        }
        
        .insights-section-title {
            font-size: 1.6rem;
            margin-bottom: 1.5rem;
            color: var(--dark);
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 0.8rem;
            font-weight: 600;
        }
                
        .insights-tabs {
            display: flex;
            border-bottom: 1px solid var(--neutral);
            margin-bottom: 2.5rem;
            gap: 0.5rem;
        }
        
        .insights-tab {
            padding: 1rem 1.8rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-weight: 500;
            color: var(--gray);
        }
        
        .insights-tab.active {
            border-bottom-color: var(--secondary);
            color: var(--dark);
            font-weight: 600;
            background-color: rgba(78, 205, 196, 0.05);
        }
        
        .insights-tab:hover:not(.active) {
            border-bottom-color: var(--accent);
            background-color: rgba(255, 230, 109, 0.05);
        }
        
        .tab-content {
            height: auto;
            overflow: hidden;
            display: none; /* Hide inactive tabs by default */
        }

        .tab-content.active {
            display: block;
        }
        
        .insight-card {
            background-color: var(--neutral);
            border-radius: var(--border-radius-md);
            padding: 1.8rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .insight-card-title {
            font-size: 1.3rem;
            color: var(--dark);
            margin-bottom: 1.2rem;
            font-weight: 600;
        }
        
        .multi-chart-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 2.5rem;
        }
        
        .chart-wrapper {
            background-color: white;
            border-radius: var(--border-radius-md);
            padding: 1.5rem 1.5rem 3rem 1.5rem; /* Increase bottom padding */
            box-shadow: var(--shadow-sm);
            /* Add a max-height to prevent chart containers from growing too large */
            max-height: 550px;
            overflow: hidden;
            margin-bottom: 2rem; /* Add margin between charts */
            border: 1px solid rgba(0, 0, 0, 0.03);
            transition: var(--transition-default);
        }
        
        .chart-wrapper:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-5px);
        }
                
        .chart-wrapper h4 {
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--dark);
            font-weight: 600;
        }
        
        .insight-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.9rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .insight-metric:last-child {
            border-bottom: none;
        }
        
        .metric-label {
            font-weight: 600;
            color: var(--dark);
        }
        
        .metric-value {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--dark);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 500;
        }
        
        .insight-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
            border-radius: var(--border-radius-sm);
            overflow: hidden;
        }
        
        .insight-table th {
            background: var(--gradient-secondary);
            color: white;
            text-align: left;
            padding: 1rem;
            font-weight: 600;
        }
        
        .insight-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--neutral);
        }
        
        .insight-table tr:nth-child(even) {
            background-color: rgba(78, 205, 196, 0.05);
        }
        
        .insight-table tr:last-child td {
            border-bottom: none;
        }
        
        .insight-table tr:hover {
            background-color: rgba(78, 205, 196, 0.1);
        }

        .mode-toggle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
                        
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #4ECDC4; /* Changed from #FF6B6B to #4ECDC4 */
            transition: .4s;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
        }

        input:checked + .slider {
            background-color: #FF6B6B;
        }
        
        input:focus + .slider {
            box-shadow: 0 0 2px #4ECDC4;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .slider.round {
            border-radius: 34px;
        }
        
        .slider.round:before {
            border-radius: 50%;
        }

        /* Controversy Score Info Popup Styles */
        .info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--secondary);
            color: white;
            font-size: 12px;
            font-weight: bold;
            margin-left: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .info-icon:hover {
            background-color: var(--primary);
            transform: scale(1.15);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }

        .info-icon-classification {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--secondary);
            color: white;
            font-size: 12px;
            font-weight: bold;
            margin-left: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .info-icon-classification:hover {
            background-color: var(--primary);
            transform: scale(1.15);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }

        .controversy-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            backdrop-filter: blur(5px);
        }

        .controversy-popup.active {
            opacity: 1;
            pointer-events: all;
        }

        .controversy-popup-content {
            background-color: white;
            border-radius: var(--border-radius-lg);
            padding: 30px;
            max-width: 700px;
            width: 90%;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
            position: relative;
            max-height: 85vh;
            overflow-y: auto;
        }

        .close-popup {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            color: var(--gray);
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-popup:hover {
            color: var(--primary);
            background-color: rgba(255, 107, 107, 0.1);
            transform: rotate(90deg);
        }

        .controversy-popup-title {
            font-size: 1.7rem;
            color: var(--dark);
            margin-bottom: 20px;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 12px;
            font-weight: 600;
        }

        .formula-box {
            background-color: var(--neutral);
            padding: 18px;
            border-radius: var(--border-radius-md);
            margin: 20px 0;
            font-family: monospace;
            font-size: 16px;
            border-left: 4px solid var(--secondary);
            box-shadow: var(--shadow-sm);
        }

        .example-box {
            background-color: rgba(78, 205, 196, 0.08);
            border: 1px solid var(--secondary);
            border-radius: var(--border-radius-md);
            padding: 20px;
            margin: 20px 0;
            box-shadow: var(--shadow-sm);
        }

        .example-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 1.15rem;
        }

        .component-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
        }

        .component-row:last-child {
            border-bottom: none;
        }

        .component-name {
            font-weight: 600;
            color: var(--dark);
        }

        .component-value {
            font-family: monospace;
            background-color: rgba(26, 83, 92, 0.08);
            padding: 3px 8px;
            border-radius: 4px;
        }

        .final-score {
            font-weight: bold;
            margin-top: 15px;
            text-align: right;
            font-size: 1.2em;
            color: var(--dark);
            background-color: rgba(78, 205, 196, 0.2);
            padding: 8px 15px;
            border-radius: var(--border-radius-sm);
            display: inline-block;
        }

        .title-with-icon {
            display: flex;
            align-items: center;
        }

        .title-with-icon .info-icon .info-icon-classification {
            position: relative;
            top: -1px;
            margin-left: 8px;
            width: 20px;
            height: 20px;
            font-size: 13px;
        }
        .demographic-selector {
          margin: 10px 0;
          display: flex;
          align-items: center;
          gap: 12px;
        }
        
        .demographic-selector select {
          padding: 8px 12px;
          border-radius: var(--border-radius-sm);
          border: 1px solid #ddd;
          background-color: white;
          font-family: 'Montserrat', sans-serif;
          font-size: 14px;
          cursor: pointer;
          box-shadow: var(--shadow-sm);
          transition: var(--transition-default);
        }
        
        .demographic-selector select:hover {
          border-color: var(--secondary);
          box-shadow: 0 2px 6px rgba(78, 205, 196, 0.2);
        }
        
        .demographic-selector select:focus {
          outline: none;
          border-color: var(--secondary);
          box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.2);
        }
        
        .demographic-selector label {
          font-weight: 500;
          color: var(--dark);
        }

        /* Victory graphic styles */
        .victory-graphic-container {
            position: relative;
            max-width: 300px;
            margin: 2rem auto 3rem;
            transform: scale(0);
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.17, 0.67, 0.83, 0.67);
        }
        
        .victory-graphic-container.active {
            transform: scale(1);
            opacity: 1;
        }
        
        .victory-graphic {
            width: 100%;
            height: auto;
            border-radius: var(--border-radius-lg);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 4px solid var(--accent);
        }
        
        .victory-badge {
            position: absolute;
            top: -20px;
            right: -20px;
            background: var(--accent);
            color: var(--dark);
            font-weight: 800;
            font-size: 1rem;
            padding: 0.6rem 1rem;
            border-radius: 50px;
            transform: rotate(15deg);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 2;
            border: 2px solid var(--dark);
        }
        
        /* Confetti styles */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            overflow: hidden;
            display: none;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f2d74e;
            opacity: 0.8;
            transform-origin: center;
            animation: fall linear forwards;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Video Button Styles */
    .video-button {
        position: fixed;
        bottom: 30px;
        right: 110px; /* Position to the left of the insights button */
        width: 65px;
        height: 65px;
        border-radius: 50%;
        background: var(--gradient-primary);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
        z-index: 990;
        transition: all 0.3s;
        font-size: 1.4rem;
    }
    
    .video-button:hover {
        transform: translateY(-3px) scale(1.05);
        background: linear-gradient(135deg, #ff5252, #FF8E53);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
    }
    
    .video-button i {
        font-size: 24px;
    }
    
    /* Video Modal Styles */
    .video-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.85);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.4s ease;
        backdrop-filter: blur(5px);
    }
    
    .video-modal.active {
        opacity: 1;
        pointer-events: all;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
    }
    
    .video-content {
        width: 90%;
        max-width: 1000px;
        background-color: #1A1A1A;
        border-radius: var(--border-radius-lg);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        position: relative;
        transform: translateY(30px);
        transition: transform 0.4s ease;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
    }
    
    .video-modal.active .video-content {
        transform: translateY(0);
    }
    
    .video-header {
        padding: 1.5rem;
        background: var(--gradient-primary);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .video-title {
        font-family: 'Playfair Display', serif;
        font-size: 1.8rem;
        margin: 0;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }
    
    .close-video {
        font-size: 2.2rem;
        color: white;
        background: none;
        border: none;
        cursor: pointer;
        transition: all 0.3s;
        opacity: 0.9;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
    }
    
    .close-video:hover {
        transform: rotate(90deg);
        background-color: rgba(255, 255, 255, 0.1);
        opacity: 1;
    }
    
    .video-body {
        padding: 0;
        overflow: hidden;
        background-color: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        aspect-ratio: 16 / 10;
    }
    
    .video-body video {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }
    
    /* Make sure video maintains aspect ratio on smaller screens */
    @media screen and (max-width: 768px) {
        .insights-button, .video-button {
          width: 55px;
          height: 55px;
          font-size: 1.2rem;
        }
        
        .insights-button {
          right: 30px;
          bottom: 30px;
        }
        .video-button {
            right: 110px;
            bottom: 30px;
            width: 55px;
            height: 55px;
            font-size: 1.2rem;
        }
        
        .video-title {
            font-size: 1.4rem;
        }

        .video-content {
          width: 95%;
          height: auto;
          max-height: 90vh;
        }
        
        .video-body {
          height: auto;
          max-height: calc(90vh - 70px); /* Subtract header height */
        }
    }
     /* GPT Button Styles */
     .gpt-button {
        position: fixed;
        bottom: 30px;
        right: 190px; /* Position to the left of the video button */
        width: 65px;
        height: 65px;
        border-radius: 50%;
        background: linear-gradient(135deg, #10a37f, #0A8264);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
        z-index: 990;
        transition: all 0.3s;
        font-size: 1.4rem;
      }
      
      .gpt-button:hover {
        transform: translateY(-3px) scale(1.05);
        background: linear-gradient(135deg, #0d906f, #086f55);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
      }
      
      .gpt-button i {
        font-size: 24px;
      }
      
      /* GPT Modal Styles */
      .gpt-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.85);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.4s ease;
        backdrop-filter: blur(5px);
      }
      
      .gpt-modal.active {
        opacity: 1;
        pointer-events: all;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
      }
      
      .gpt-content {
        width: 90%;
        max-width: 1000px;
        height: 90%;
        background-color: white;
        border-radius: var(--border-radius-lg);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        position: relative;
        transform: translateY(30px);
        transition: transform 0.4s ease;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
      }
      
      .gpt-modal.active .gpt-content {
        transform: translateY(0);
      }
      
      .gpt-header {
        padding: 1.5rem;
        background: linear-gradient(135deg, #10a37f, #0A8264);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .gpt-title {
        font-family: 'Playfair Display', serif;
        font-size: 1.8rem;
        margin: 0;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }
      
      .close-gpt {
        font-size: 2.2rem;
        color: white;
        background: none;
        border: none;
        cursor: pointer;
        transition: all 0.3s;
        opacity: 0.9;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
      }
      
      .close-gpt:hover {
        transform: rotate(90deg);
        background-color: rgba(255, 255, 255, 0.1);
        opacity: 1;
      }
      
      .gpt-body {
        flex-grow: 1;
        height: calc(100% - 76px); /* Subtract header height */
        padding: 0;
        overflow: hidden;
      }
      
      .gpt-body iframe {
        border: none;
        width: 100%;
        height: 100%;
      }
      
      /* Responsive Styles */
      @media screen and (max-width: 768px) {
        .gpt-button {
          right: 170px;
          bottom: 30px;
          width: 55px;
          height: 55px;
          font-size: 1.2rem;
        }
        
        .gpt-title {
          font-size: 1.4rem;
        }
        
        .gpt-content {
          width: 95%;
          height: 90%;
        }
      }
    </style>
</head>
<body>
    <!-- Scroll progress bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <!-- Hero section -->
    <section class="hero" id="hero">
      <div class="hero-content">
          <img src="hero.png" alt="Is a Hot Dog a Sandwich?" class="hero-image">
          <p class="subtitle">Exploring the food identity crisis that's dividing the culinary world</p>
      </div>
      <div class="scroll-down" id="scrollDown">↓</div>
    </section>
        
    <!-- Introduction section -->
    <section id="intro">
        <div class="container">
            <h2 class="section-title fade-in">The Great Debate</h2>
            <div class="grid-2">
                <div class="card fade-in">
                    <h3 class="card-title">The Question That Divides Us</h3>
                    <p>Welcome to one of the most contentious food debates of our time. The question seems simple: Is a hot dog a sandwich? Yet this culinary conundrum has sparked passionate arguments at dinner tables, online forums, and even scholarly discussions.</p>
                    <p>&nbsp;</p>
                    <p>We've analyzed extensive data from surveys, debates, and linguistic patterns to bring you the definitive answer, backed by science and cultural analysis.</p>
                </div>
                <div class="card fade-in">
                    <h3 class="card-title">Why This Question Matters</h3>
                    <p>At first glance, the hot dog-sandwich debate might seem trivial, but it reveals fascinating insights about:</p>
                    <ul class="criteria-list">
                        <li class="criteria-item">How we categorize foods across cultures</li>
                        <li class="criteria-item">The importance of structure vs. function in definitions</li>
                        <li class="criteria-item">Our tendency to create taxonomies for everything</li>
                        <li class="criteria-item">The tension between technical definitions and cultural understanding</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    
    <!-- The Face-Off section -->
    <section class="debate-section" id="faceoff">
        <div class="container">
            <h2 class="section-title fade-in">The Face-Off</h2>
            <div class="vs-container">
                <div class="debate-item slide-in-left">
                    <div class="debate-icon hotdog-icon">
                      <img src="hotdog.png"/>
                    </div>
                    <h3 class="debate-title">Hot Dog</h3>
                    <p>A sausage served in a sliced bun. The modern hot dog evolved from German sausage traditions brought to America in the 19th century.</p>
                </div>
                
                <div class="vs">VS</div>
                
                <div class="debate-item slide-in-right">
                    <div class="debate-icon sandwich-icon">
                      <img src="sandwich.png"/>
                    </div>
                    <h3 class="debate-title">Sandwich</h3>
                    <p>An item of food consisting of two pieces of bread with a filling between them. Named after the Earl of Sandwich in the 18th century.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Interactive element -->
    <section id="interactive">
      <div class="container">
          <h2 class="section-title fade-in">The Structural Perspective</h2>
          <p class="fade-in">One of the key arguments in this debate centers around the structure of the bun. Traditional sandwiches have two separate pieces of bread, while a hot dog bun is typically connected. See what happens when we transform the structure in 3D:</p>
          
          <div class="hotdog-sandwich-interactive fade-in" style="margin-top: 2rem; height: 500px;">
              <div id="hotdog3dContainer" style="width: 100%; height: 450px; cursor: grab;"></div>
              <div class="toggle-container" style="position: absolute; bottom: 1rem; left: 50%; transform: translateX(-50%);">
                  <p class="toggle-label" id="toggleLabel">Hot Dog Mode</p>
                  <button class="toggle-button" id="toggleButton">Transform Structure</button>
              </div>
          </div>
          
          <div class="grid-2">
              <div class="card fade-in">
                  <h3 class="card-title">The Connectivity Argument</h3>
                  <p>A significant point in the debate is the connected nature of the hot dog bun. Traditional sandwiches use two completely separate pieces of bread, while the typical hot dog bun is a single piece that's been sliced but remains connected on one side.</p>
                  <p>&nbsp;</p>
                  <p>Some argue that this structural difference fundamentally disqualifies the hot dog from sandwich status, while others suggest that the function (containing fillings between bread) is more important than the technical structure.</p>
              </div>
              <div class="card fade-in">
                  <h3 class="card-title">The Transformation Theory</h3>
                  <p>An intriguing perspective in our data suggests that a hot dog exists in a state of potential transformation: it becomes a sandwich the moment the bun splits into two separate pieces.</p>
                  <p>&nbsp;</p>
                  <p>This raises a fascinating philosophical question: Can food change categories based on incidental structural changes during consumption, or should classification be based on intended design?</p>
              </div>
          </div>
      </div>
  </section>
  
  <!-- Cultural context section -->
  <section id="cultural">
    <div class="container">
        <h2 class="section-title fade-in">The Cultural Context</h2>
        <div class="grid-2">
            <div class="card fade-in">
                <h3 class="card-title">Beyond Structure: Cultural Categories</h3>
                <p>Food classification isn't solely about physical attributes—culture plays a crucial role in how we categorize culinary items. Hot dogs have developed their own distinct cultural category separate from sandwiches.</p>
                <p>&nbsp;</p>
                <p>This distinction is evident in everyday language: we go to "hot dog stands," not "sandwich shops" for this food. The National Hot Dog and Sausage Council (yes, that's a real organization) firmly declares that hot dogs are not sandwiches but exist in a category of their own.</p>
            </div>
            <div class="card fade-in">
                <h3 class="card-title">The Historical Perspective</h3>
                <p>Understanding the evolutionary path of the hot dog provides important context. Hot dogs evolved from German sausage traditions, while sandwiches trace their lineage to the Earl of Sandwich in 18th century England.</p>
                <p>&nbsp;</p>
                <p>These parallel but distinct culinary histories suggest that forcing hot dogs into the sandwich category might be an oversimplification that ignores rich cultural heritage and distinct culinary traditions.</p>
            </div>
        </div>
        
        <div class="timeline fade-in" style="text-align: center; max-width: 100%; margin: 3rem auto;">
          <img src="hotdoghistory.png" alt="Hot Dog History Timeline" style="max-width: 100%; height: auto; display: block; margin: 0 auto; max-height: 80vh; object-fit: contain;">
        </div>
    </div>
</section>

    <!-- Sandwich criteria section -->
    <section id="criteria">
      <div class="container">
          <h2 class="section-title fade-in">What Makes a Sandwich?</h2>
          <div class="grid-2">
              <div class="card fade-in">
                  <h3 class="card-title">The Essential Sandwich Criteria</h3>
                  <p>The above structural and cultural insights allow us to determine if a hot dog is a sandwich. According to our analysis, these are the key criteria:</p>
                  <ul class="criteria-list">
                      <li class="criteria-item">Bread on exterior</li>
                      <li class="criteria-item">Contains at least one filling</li>
                      <li class="criteria-item">Structural integrity for portability</li>
                      <li class="criteria-item">Number of bread pieces (typically two)</li>
                      <li class="criteria-item">Bread connectivity</li>
                      <li class="criteria-item">Chef's intent</li>
                      <li class="criteria-item">Cultural perception</li>
                  </ul>
              </div>
              <div class="card fade-in">
                  <h3 class="card-title">Hot Dog Analysis</h3>
                  <p>Let's examine how a hot dog measures up against these sandwich criteria:</p>
                  <ul class="criteria-list">
                      <li class="criteria-item">Bread on exterior (bun)</li>
                      <li class="criteria-item">Contains filling (sausage)</li>
                      <li class="criteria-item">Maintains structural integrity</li>
                      <li class="criteria-item-no">Single connected piece of bread (not two separate pieces)</li>
                      <li class="criteria-item-no">Loaded from the top rather than stacked horizontally</li>
                      <li class="criteria-item-no">Culturally distinct classification from sandwiches</li>
                  </ul>
              </div>
          </div>
      </div>
  </section>
    <!-- Data visualization section -->
    <section id="data">
        <div class="container">
            <h2 class="section-title fade-in">What the Data Tells Us</h2>
            <p class="fade-in">We've analyzed extensive survey data to understand where public opinion stands on this crucial issue.</p>
            
            <div class="grid-2">
                <div class="card fade-in">
                  <h3 class="card-title">The People Have Spoken</h3>
                  <div class="mode-toggle-container">
                    <span>Connected Bun</span>
                    <label class="switch">
                        <input type="checkbox" id="modeToggle">
                        <span class="slider round"></span>
                    </label>
                    <span>Separated Bun</span>
                </div>
                  <div class="chart-container">
                      <canvas id="surveyChart"></canvas>
                  </div>
                  <p><small>Based on survey data from 501 respondents</small></p>
              </div>
              <div class="card fade-in">
                <h3 class="card-title title-with-icon">
                    <span>Controversy Score Analysis</span>
                    <span class="info-icon" id="controversyInfoIcon">i</span>
                </h3>
                <p>Our analysis shows that hot dogs have a controversy score of 0.517, which places them higher on the controversy scale, significantly above other debated food items like tacos (0.437) and more than double the score of curry (0.187).</p>
                <div class="chart-container">
                    <canvas id="controversyChart"></canvas>
                </div>
              </div>
            </div>
            
            <div class="card fade-in">
              <h3 class="card-title title-with-icon">
                  <span>Food Classification Perspectives</span>
                  <span class="info-icon-classification" id="mainClassificationInfoIcon">i</span>
              </h3>
              <p>&nbsp;</p>
              <p>Our data reveals interesting patterns in how people classify foods. The most common perspective (held by 290 respondents) can be characterized as "Sandwich Traditionalist," which strictly adheres to traditional definitions of food categories.</p>
              <div class="evidence-point">
                  <h4 class="evidence-heading">Key Classification Dimensions</h4>
                  <p class="evidence-text">We identified two primary dimensions people use when categorizing foods: their sandwich classification approach (ranging from Traditionalist to Expansionist) and their intent classification approach (whether physical form or creator intent matters more).</p>
              </div>
              <div class="chart-container">
                  <canvas id="perspectiveChart"></canvas>
              </div>
          </div>
        </div>
    </section>
    
    <!-- Arguments section -->
    <section class="arguments-section" id="arguments">
        <div class="container">
            <h2 class="section-title fade-in">The Key Arguments</h2>
            <p class="fade-in">Let's examine the strongest arguments from both sides of this culinary controversy.</p>
            
            <div class="grid-2">
                <div class="arg-for fade-in">
                    <h3 class="argument-title">Arguments FOR Classification as a Sandwich</h3>
                    <ul class="argument-list">
                        <li class="argument-item">Contains filling (sausage) between bread (bun)</li>
                        <li class="argument-item">Serves the same function as a sandwich</li>
                        <li class="argument-item">Meets minimum ingredient requirements</li>
                        <li class="argument-item">Can be held in hand and eaten without utensils</li>
                        <li class="argument-item">Structure transforms to sandwich-like when bun splits</li>
                    </ul>
                </div>
                
                <div class="arg-against fade-in">
                    <h3 class="argument-title">Arguments AGAINST Classification as a Sandwich</h3>
                    <ul class="argument-list">
                        <li class="argument-item">Bun is a single connected piece of bread</li>
                        <li class="argument-item">Not stacked horizontally like traditional sandwiches</li>
                        <li class="argument-item">Culturally distinct from sandwiches in culinary tradition</li>
                        <li class="argument-item">Filling-to-bread ratio differs from typical sandwiches</li>
                        <li class="argument-item">Hot dogs have their own distinct category</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    
    <!-- The verdict section -->
    <section class="verdict-section" id="verdict">
        <div class="verdict-content">
            <h2 class="verdict-title fade-in">The Verdict</h2>
            <p class="verdict-text fade-in">After analyzing the data, weighing the arguments, and considering both structural and cultural perspectives, we've reached a conclusion based on the evidence:</p>
            
            <div class="verdict-answer scale-in">No, a Hot Dog is NOT a Sandwich</div>
            <div class="victory-graphic-container fade-in scale-in">
              <img src="hotdogvictory.png" alt="Hot Dog Victory" class="victory-graphic">
              <div class="victory-badge">CASE CLOSED</div>
            </div>
            <p class="verdict-text fade-in">While hot dogs share some characteristics with sandwiches, the connected nature of the bun, the distinct cultural categorization, and the overwhelming consensus in our survey data (62.5% say "No") all point to the hot dog existing in its own unique food category.</p>
            
            <div class="controversy-meter">
                <div class="controversy-fill" id="controversyFill"></div>
            </div>
            <div class="meter-labels">
                <span>Low Controversy</span>
                <span>High Controversy</span>
            </div>
            <p><small>Hot Dog's Controversy Score: 0.517 out of 1.0</small></p>
        </div>
    </section>
    
    <!-- Broader implications section -->
    <section id="implications">
        <div class="container">
            <h2 class="section-title fade-in">Beyond Hot Dogs: Broader Implications</h2>
            <div class="grid-3">
                <div class="card fade-in">
                    <h3 class="card-title">Food Taxonomy Insights</h3>
                    <p>This debate reveals how food categories blend structural, functional, cultural, and historical elements. It shows that categorization is rarely based on rigid definitions alone.</p>
                    <p>&nbsp;</p>
                    <p>The hot dog controversy demonstrates how we often rely on prototype theory when categorizing items—comparing foods to typical examples rather than checking off criteria from strict definitions.</p>
                </div>
                <div class="card fade-in">
                    <h3 class="card-title">Cultural Boundaries</h3>
                    <p>The hot dog-sandwich debate illustrates how food categories can be culturally bounded, with disagreement arising when applying categories from one culinary tradition to foods from another.</p>
                    <p>&nbsp;</p>
                    <p>This pattern extends beyond hot dogs to other cross-cultural food categorizations, revealing the cultural specificity of our food taxonomy.</p>
                </div>
                <div class="card fade-in">
                    <h3 class="card-title">Linguistic Evolution</h3>
                    <p>Language evolves through usage, not technical definitions. The fact that most people don't refer to hot dogs as sandwiches in everyday speech is a strong indicator of their distinct categorical status.</p>
                    <p>&nbsp;</p>
                    <p>This reflects the descriptive (how language is actually used) versus prescriptive (how language "should" be used) approach to linguistics.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Methodology section -->
    <section class="methodology-section" id="methodology">
      <div class="container">
        <?xml version="1.0" encoding="UTF-8"?>
        <svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
          <!-- Background -->
          <rect width="900" height="600" fill="#F7FFF7" />
          
          <!-- Title -->
          <text x="450" y="40" font-family="Montserrat, sans-serif" font-size="24" font-weight="700" text-anchor="middle" fill="#1A535C">Food Classification Research Methodology</text>
          <text x="450" y="70" font-family="Montserrat, sans-serif" font-size="16" font-weight="400" text-anchor="middle" fill="#6C757D">How the "Is a Hot Dog a Sandwich?" interactive analysis was created</text>
          
          <!-- Data Source Box -->
          <rect x="70" y="120" width="200" height="100" rx="10" fill="white" stroke="#4ECDC4" stroke-width="2"/>
          <text x="170" y="150" font-family="Montserrat, sans-serif" font-size="18" font-weight="600" text-anchor="middle" fill="#1A535C">Raw Survey Data</text>
          <text x="170" y="175" font-family="Montserrat, sans-serif" font-size="14" text-anchor="middle" fill="#6C757D">501 respondents</text>
          <text x="170" y="195" font-family="Montserrat, sans-serif" font-size="14" text-anchor="middle" fill="#6C757D">10 classification questions</text>
          
        
          <!-- Arrows from Data Source -->
          <path d="M270 150 L360 150" stroke="#1A535C" stroke-width="2" fill="none"/>
          <path d="M360 150 L350 145 L350 155 Z" fill="#1A535C"/>
          
          <path d="M270 170 L325 170 L325 250 L360 250" stroke="#1A535C" stroke-width="2" fill="none"/>
          <path d="M360 250 L350 245 L350 255 Z" fill="#1A535C"/>
          
          <!-- Quantitative Analysis AI Agent -->
          <rect x="360" y="100" width="220" height="100" rx="10" fill="white" stroke="#FF6B6B" stroke-width="2"/>
          <text x="470" y="130" font-family="Montserrat, sans-serif" font-size="18" font-weight="600" text-anchor="middle" fill="#1A535C">Quantitative Analysis</text>
          <text x="470" y="150" font-family="Montserrat, sans-serif" font-size="14" text-anchor="middle" fill="#6C757D">AI Agent</text>
          <text x="470" y="175" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• Statistical analysis</text>
          <text x="470" y="195" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• Controversy score calculation</text>
          
          <!-- NLP Analysis AI Agent -->
          <rect x="360" y="220" width="220" height="100" rx="10" fill="white" stroke="#FF6B6B" stroke-width="2"/>
          <text x="470" y="250" font-family="Montserrat, sans-serif" font-size="18" font-weight="600" text-anchor="middle" fill="#1A535C">Natural Language</text>
          <text x="470" y="270" font-family="Montserrat, sans-serif" font-size="18" font-weight="600" text-anchor="middle" fill="#1A535C">Understanding</text>
          <text x="470" y="290" font-family="Montserrat, sans-serif" font-size="14" text-anchor="middle" fill="#6C757D">AI Agent</text>
          <text x="470" y="315" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• Text analysis of responses</text>
          
          <!-- Arrows to Data Viz -->
          <path d="M580 150 L615 150 L615 220 L650 220" stroke="#1A535C" stroke-width="2" fill="none"/>
          <path d="M650 220 L640 215 L640 225 Z" fill="#1A535C"/>
          
          <path d="M580 270 L650 270" stroke="#1A535C" stroke-width="2" fill="none"/>
          <path d="M650 270 L640 265 L640 275 Z" fill="#1A535C"/>
          
          <!-- Data Visualization AI Agent -->
          <rect x="650" y="220" width="220" height="100" rx="10" fill="white" stroke="#FF6B6B" stroke-width="2"/>
          <text x="760" y="250" font-family="Montserrat, sans-serif" font-size="18" font-weight="600" text-anchor="middle" fill="#1A535C">Data Visualization</text>
          <text x="760" y="270" font-family="Montserrat, sans-serif" font-size="14" text-anchor="middle" fill="#6C757D">AI Agent</text>
          <text x="760" y="295" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• Chart.js visualizations</text>
          <text x="760" y="315" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• 3D modeling with Three.js</text>
          
          <!-- Arrow to Website -->
          <path d="M760 320 L760 380" stroke="#1A535C" stroke-width="2" fill="none"/>
          <path d="M760 380 L755 370 L765 370 Z" fill="#1A535C"/>
          
          <!-- Final Website Box -->
          <rect x="650" y="380" width="220" height="140" rx="10" fill="white" stroke="#4ECDC4" stroke-width="2"/>
          <text x="760" y="410" font-family="Montserrat, sans-serif" font-size="18" font-weight="600" text-anchor="middle" fill="#1A535C">Interactive Website</text>
          <text x="760" y="435" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• Interactive data displays</text>
          <text x="760" y="455" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• 3D hot dog visualization</text>
          <text x="760" y="475" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• Demographic breakdown</text>
          <text x="760" y="495" font-family="Montserrat, sans-serif" font-size="13" text-anchor="middle" fill="#6C757D">• Controversy metrics</text>
          
          <!-- Example Output Icons -->
          <rect x="60" y="380" width="550" height="140" rx="10" fill="white" stroke="#1A535C" stroke-width="2"/>
          <text x="330" y="410" font-family="Montserrat, sans-serif" font-size="18" font-weight="600" text-anchor="middle" fill="#1A535C">Key Research Findings</text>
          
          <!-- Finding 1 -->
          <rect x="80" y="430" width="160" height="70" rx="8" fill="rgba(255, 107, 107, 0.1)" stroke="#FF6B6B" stroke-width="1"/>
          <text x="160" y="455" font-family="Montserrat, sans-serif" font-size="14" font-weight="600" text-anchor="middle" fill="#1A535C">Structural Analysis</text>
          <text x="160" y="475" font-family="Montserrat, sans-serif" font-size="12" text-anchor="middle" fill="#6C757D">Hot dog structure differs</text>
          <text x="160" y="490" font-family="Montserrat, sans-serif" font-size="12" text-anchor="middle" fill="#6C757D">from traditional sandwich</text>
          
          <!-- Finding 2 -->
          <rect x="260" y="430" width="160" height="70" rx="8" fill="rgba(78, 205, 196, 0.1)" stroke="#4ECDC4" stroke-width="1"/>
          <text x="340" y="455" font-family="Montserrat, sans-serif" font-size="14" font-weight="600" text-anchor="middle" fill="#1A535C">Controversy Score</text>
          <text x="340" y="475" font-family="Montserrat, sans-serif" font-size="12" text-anchor="middle" fill="#6C757D">Hot Dogs: 0.517</text>
          <text x="340" y="490" font-family="Montserrat, sans-serif" font-size="12" text-anchor="middle" fill="#6C757D">High debate intensity</text>
          
          <!-- Finding 3 -->
          <rect x="440" y="430" width="160" height="70" rx="8" fill="rgba(255, 230, 109, 0.1)" stroke="#FFE66D" stroke-width="1"/>
          <text x="520" y="455" font-family="Montserrat, sans-serif" font-size="14" font-weight="600" text-anchor="middle" fill="#1A535C">Survey Results</text>
          <text x="520" y="475" font-family="Montserrat, sans-serif" font-size="12" text-anchor="middle" fill="#6C757D">62.5% say "Not a Sandwich"</text>
          <text x="520" y="490" font-family="Montserrat, sans-serif" font-size="12" text-anchor="middle" fill="#6C757D">28.9% say "Is a Sandwich"</text>
          
          <!-- Methodology Description -->
          <rect x="70" y="550" width="760" height="30" rx="5" fill="rgba(26, 83, 92, 0.05)" stroke="none"/>
          <text x="450" y="570" font-family="Montserrat, sans-serif" font-size="12" text-anchor="middle" fill="#1A535C">Methodology: Survey data processed through specialized AI agents to extract insights and create interactive visualizations</text>
        </svg>
      </div>
    </section>

    <!-- Data Insights Button -->
    <div class="insights-button" id="openInsights" title="Dive Deep into Data">
      <i>📊</i>
    </div>

    <!-- Video Button -->
    <div class="video-button" id="openVideo" title="Watch the Rap Battle">
      <i>🎬</i>
    </div>

    <!-- GPT Button -->
    <a href="https://chatgpt.com/g/g-67ffdb3ba27481918e4955955d4e1f35-isahotdogasandwich" target="_blank" class="gpt-button" id="openGPT" title="Classify Your Pic">
      <i>🤖</i>
    </a>

    <!-- GPT Modal -->
    <div class="gpt-modal" id="gptModal">
      <div class="gpt-content">
        <div class="gpt-header">
          <h2 class="gpt-title">Sandwich Classifier GPT</h2>
          <button class="close-gpt" id="closeGPT">×</button>
        </div>
        <div class="gpt-body">
          <iframe src="https://chatgpt.com/g/g-67ffdb3ba27481918e4955955d4e1f35-isahotdogasandwich" width="100%" height="100%" frameborder="0" allow="microphone"></iframe>
        </div>
      </div>
    </div>

    <!-- Video Modal -->
    <div class="video-modal" id="videoModal">
      <div class="video-content">
          <div class="video-header">
              <h2 class="video-title">Hot Dog vs Sandwich: The Rap Battle</h2>
              <button class="close-video" id="closeVideo">×</button>
          </div>
          <div class="video-body">
              <video id="hotdogVideo" controls autoplay>
                  <source src="hotdogvssandwich.mp4" type="video/mp4">
                  Your browser does not support the video tag.
              </video>
          </div>
      </div>
    </div>
  
  <!-- Data Insights Modal -->
  <div class="insights-modal" id="insightsModal">
      <div class="insights-content">
          <div class="insights-header">
              <h2 class="insights-title">Detailed Food Classification Data Insights</h2>
              <button class="close-insights" id="closeInsights">×</button>
          </div>
          <div class="insights-body">
              <div class="insights-tabs">
                  <div class="insights-tab active" data-tab="survey">Survey Analysis</div>
                  <div class="insights-tab" data-tab="linguistics">Linguistic Patterns</div>
                  <div class="insights-tab" data-tab="controversy">Controversy Metrics</div>
                  <div class="insights-tab" data-tab="perspective">Classification Perspectives</div>
              </div>
              
              <!-- Survey Analysis Tab -->
              <div class="tab-content active" id="surveyTab">
                  <div class="insights-section">
                      <h3 class="insights-section-title">Detailed Survey Results</h3>
                        <div class="chart-wrapper">
                          <h4>Is a Hot Dog a Sandwich? (n=501)</h4>
                          <div class="mode-toggle-container">
                            <span>Connected Bun</span>
                            <label class="switch">
                                <input type="checkbox" id="demographicModeToggle">
                                <span class="slider round"></span>
                            </label>
                            <span>Separated Bun</span>
                            <div class="demographic-selector">
                                <label for="demographicFilter">Filter by:</label>
                                <select id="demographicFilter">
                                  <option value="ALL">All Respondents</option>
                                  <option value="GENDER">Gender</option>
                                  <option value="REGION">Region</option>
                                  <option value="URBANRURAL">Urban/Rural</option>
                                  <option value="EDUCATION">Education</option>
                                  <option value="HHINCOME">Household Income</option>
                                  <option value="ETHNICITYROLL23">Ethnicity</option>
                                  <option value="VIZMINROLL23">Visible Minority</option>
                                  <option value="PMARITALSTATUS">Marital Status</option>
                                </select>
                            </div>
                          </div>
                          <canvas id="detailedSurveyChart" height="250"></canvas>
                          
                        </div>
                      </div>
              </div>
              
              <!-- Linguistic Patterns Tab -->
              <div class="tab-content" id="linguisticsTab">
                  <div class="insights-section">
                      <h3 class="insights-section-title">Text Analysis Insights</h3>
                      <div class="chart-wrapper">
                          <h4>Most Frequent Terms in Food Debate Discussion</h4>
                          <canvas id="wordFrequencyChart" height="300"></canvas>
                      </div>
                      
                      <div class="insight-card">
                          <h4 class="insight-card-title">Topic Analysis</h4>
                          <table class="insight-table">
                            <thead>
                                <tr>
                                    <th>Topic</th>
                                    <th>Key Terms</th>
                                    <th>Weight</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Pizza-Stew-Curry Analysis</td>
                                    <td>pizza, stew, curry, soup, two</td>
                                    <td>304.51</td>
                                </tr>
                                <tr>
                                    <td>Hot Dog Sandwich Debate</td>
                                    <td>hot, dog, sandwich, consider, soup</td>
                                    <td>26.02</td>
                                </tr>
                                <tr>
                                    <td>Food Serving Context</td>
                                    <td>eaten, rice, response, curry, served</td>
                                    <td>25.70</td>
                                </tr>
                                <tr>
                                    <td>Food Structure Analysis</td>
                                    <td>bread, think, liquid, ingredients, broth</td>
                                    <td>20.32</td>
                                </tr>
                                <tr>
                                    <td>Food Classification</td>
                                    <td>response, yes, sure, calzone, sandwich</td>
                                    <td>141.37</td>
                                </tr>
                            </tbody>
                        </table>
                      </div>
                  </div>
              </div>
              
              <!-- Controversy Metrics Tab -->
              <div class="tab-content" id="controversyTab">
                  <div class="insights-section">
                      <h3 class="insights-section-title">Controversy Scores Breakdown</h3>
                      <div class="chart-wrapper">
                          <h4>Food Item Controversy Score Components</h4>
                          <canvas id="controversyBreakdownChart" height="400"></canvas>
                      </div>
                      
                      <!-- Hot Dog Controversy Analysis Card Update -->
                      <div class="insight-card">
                        <h4 class="insight-card-title">
                            Hot Dog Controversy Analysis
                            <span class="info-icon" id="controversyInfoIcon">i</span>
                        </h4>
                        <div class="insight-metric">
                          <span class="metric-label">Overall Controversy Score</span>
                          <span class="metric-value">0.517</span>
                        </div>
                        <div class="insight-metric">
                            <span class="metric-label">Category Factor</span>
                            <span class="metric-value">0.25</span>
                        </div>
                        <div class="insight-metric">
                            <span class="metric-label">Mention Factor</span>
                            <span class="metric-value">0.038</span>
                        </div>
                        <div class="insight-metric">
                            <span class="metric-label">Size Diversity</span>
                            <span class="metric-value">0.059</span>
                        </div>
                        <div class="insight-metric">
                            <span class="metric-label">Vote Closeness Factor</span>
                            <span class="metric-value">0.886</span>
                        </div>
                        <div class="insight-metric">
                            <span class="metric-label">Related Questions</span>
                            <span class="metric-value">Q1, Q2</span>
                        </div>
                      </div>
                      
                      <div class="multi-chart-container">
                          <div class="chart-wrapper">
                              <h4>Food Category Overlap</h4>
                              <canvas id="categoryOverlapChart" height="250"></canvas>
                          </div>
                          <div class="chart-wrapper">
                              <h4>Debate Intensity by Food Type</h4>
                              <canvas id="debateIntensityChart" height="250"></canvas>
                          </div>
                      </div>
                  </div>
              </div>
              
              <!-- Classification Perspectives Tab -->
              <div class="tab-content" id="perspectiveTab">
                  <div class="insights-section">
                      <h3 class="insights-section-title">Food Classification Frameworks</h3>
                      <div class="chart-wrapper">
                          <h4>Top Respondent Classification Perspectives</h4>
                          <canvas id="perspectivesDetailedChart" height="350"></canvas>
                      </div>
                      <div class="insight-card">
                        <h4 class="insight-card-title title-with-icon">
                          Classification Criteria Matrix
                          <span class="info-icon-classification" id="classificationInfoIcon">i</span>
                        </h4>
                        <table class="insight-table">
                          <thead>
                            <tr>
                              <th>Food Classification Approach</th>
                              <th>Description</th>
                              <th>Prevalence</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>Sandwich Traditionalist</td>
                              <td>Requires separate bread pieces, strictly adheres to conventional definitions</td>
                              <td>High (58%)</td>
                            </tr>
                            <tr>
                              <td>Sandwich Expansionist</td>
                              <td>Accepts non-traditional forms as sandwiches based on function rather than structure</td>
                              <td>Medium (25%)</td>
                            </tr>
                            <tr>
                              <td>Sandwich Moderate</td>
                              <td>Takes a middle-ground approach with some flexibility in definitions</td>
                              <td>Low (17%)</td>
                            </tr>
                            <tr>
                              <td>Form-Over-Intent Prioritizer</td>
                              <td>Classifies foods based on physical attributes regardless of creator intention</td>
                              <td>Medium (32%)</td>
                            </tr>
                            <tr>
                              <td>Creator-Intent Prioritizer</td>
                              <td>Believes the creator's intention determines a food's classification</td>
                              <td>Medium (31%)</td>
                            </tr>
                            <tr>
                              <td>Intent Moderate</td>
                              <td>Balances physical attributes with creator intent when classifying foods</td>
                              <td>High (37%)</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    
                    <div class="chart-wrapper">
                        <h4>Sandwich Criteria Importance by Perspective Group</h4>
                        <canvas id="criteriaImportanceChart" height="300"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    
    <!-- Footer -->
    <footer>
      <div class="footer-content">
          <div class="research-section">
              <h4 class="research-title">Explore Our Research</h4>
              <p class="research-text">
                  Want to dive deeper into the "Is a Hot Dog a Sandwich?" debate? 
                  Access our complete dataset, Python analysis scripts, and methodology documentation.
              </p>
              <a href="https://github.com/past5/isahotdogasandwitch" target="_blank" class="github-button">
                  Visit GitHub Repository
              </a>
          </div>
          <p class="copyright">© 2025 Past 5 Solutions Inc. All rights reserved.</p>
      </div>
  </footer>
    <!-- Classification Framework Popup -->
    <div class="controversy-popup" id="classificationPopup">
      <div class="controversy-popup-content">
        <button class="close-popup" id="closeClassificationPopup">×</button>
        <h3 class="controversy-popup-title">Understanding Food Classification Frameworks</h3>
        <p>Our analysis categorizes respondents based on how they approach food classification across two key dimensions: sandwich classification philosophy and the importance of creator intent.</p>
        
        <div class="formula-box">
          sandwich_score = Q1 + Q2 + Q3 + Q4 + Q7 + Q9
          intent_score = Q10 (normalized to 0-1 scale)
        </div>
        
        <h4>Classification Methodology:</h4>
        <p>Each respondent's answers contribute to two separate scores that determine their classification:</p>
        <ul>
          <li><strong>Sandwich Classification Score:</strong> Determines if someone is a Traditionalist (≤ -1), Moderate (-1 to 1), or Expansionist (≥ 1)</li>
          <li><strong>Creator Intent Score:</strong> Determines if someone is a Form-Over-Intent Prioritizer (≤ 0.3), Intent Moderate (0.3 to 0.7), or Creator-Intent Prioritizer (≥ 0.7)</li>
        </ul>
        
        <div class="example-box">
          <div class="example-title">Question Weighting System:</div>
          <div class="component-row">
            <span class="component-name">Q1: Is a hot dog a sandwich?</span>
            <span class="component-value">Yes (+1), No (-1), It depends (+0.5)</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q2: If hot dog bun splits into two pieces?</span>
            <span class="component-value">Yes (+0.8), No (-0.8)</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q3: Minimum ingredients for sandwich?</span>
            <span class="component-value">0 ingredients (+1), 1 ingredient (+0.5), 2 ingredients (0), 3+ (-1)</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q4: Is a taco a sandwich?</span>
            <span class="component-value">Hard/Soft (+0.8), If bottom rips (+0.4), Never (-1)</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q7: Open-faced sandwich preference</span>
            <span class="component-value">Much more (-1), Little more (-0.5), No difference (0), Little less (+0.5), Much less (+1)</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q9: Pizza sandwich question</span>
            <span class="component-value">Yes (+1), No (-1), Unclear (0)</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q10: Importance of chef intent</span>
            <span class="component-value">Scale from 0 (Not at all) to 1.0 (Only thing that matters)</span>
          </div>
        </div>
        
        <div class="example-box">
          <div class="example-title">Example Classification:</div>
          <p>A respondent who answers "No" to hot dog being a sandwich (-1), "No" to split bun question (-0.8), requires 3+ ingredients (-1), believes tacos are never sandwiches (-1), slightly prefers open-faced sandwiches (-0.5), and says "No" to pizza sandwich (-1) would have a total score of -5.3. This would make them a strong "Sandwich Traditionalist."</p>
          <p>If the same respondent rates chef intent importance as 2 out of 5 (0.4), they would be classified as an "Intent Moderate."</p>
        </div>
        
        <div class="example-box">
          <div class="example-title">Question Influence Analysis:</div>
          <p>Our analysis shows that some questions had much stronger influence on classification than others:</p>
          <div class="component-row">
            <span class="component-name">Q9 (Pizza sandwich):</span>
            <span class="component-value">-0.511 average contribution</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q10 (Chef intent):</span>
            <span class="component-value">0.475 average contribution</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q4 (Taco question):</span>
            <span class="component-value">-0.370 average contribution</span>
          </div>
          <div class="component-row">
            <span class="component-name">Q1 (Hot dog sandwich):</span>
            <span class="component-value">-0.297 average contribution</span>
          </div>
        </div>
        
        <p><strong>Distribution of Classifications:</strong> Among our 501 respondents, 290 (58%) were classified as Sandwich Traditionalists, 86 (17%) as Sandwich Moderates, and 125 (25%) as Sandwich Expansionists. Regarding intent, 162 (32%) were Form-Over-Intent Prioritizers, 186 (37%) were Intent Moderates, and 153 (31%) were Creator-Intent Prioritizers.</p>
      </div>
    </div>
    <!-- Understanding Controversy Score Calculation Section -->
      <div class="controversy-popup" id="controversyPopup">
        <div class="controversy-popup-content">
            <button class="close-popup" id="closeControversyPopup">×</button>
            <h3 class="controversy-popup-title">Understanding Controversy Score Calculation</h3>
            <p>The controversy score is a measure of how contentious a food item's classification is, based on four key factors:</p>
            
            <div class="formula-box">
                controversy_score = 0.5 * [(0.5 * category_factor) + (0.3 * mention_factor) + (0.2 * size_diversity)] + 0.5 * vote_closeness_factor
            </div>
            
            <h4>Component Definitions:</h4>
            <ul>
                <li><strong>Category Factor (25%):</strong> How many different food categories the item belongs to, normalized to a 0-1 scale.</li>
                <li><strong>Mention Factor (15%):</strong> How frequently the food is mentioned relative to all foods in the dataset.</li>
                <li><strong>Size Diversity (10%):</strong> How diverse the sizes of the categories are that the food belongs to.</li>
                <li><strong>Vote Closeness Factor (50%):</strong> How close the survey responses were to 50/50 split - a measure of public opinion controversy.</li>
            </ul>
            
            <div class="example-box">
                <div class="example-title">Hot Dog Example:</div>
                <div class="component-row">
                    <span class="component-name">Category Factor:</span>
                    <span class="component-value">0.25</span>
                </div>
                <div class="component-row">
                    <span class="component-name">Mention Factor:</span>
                    <span class="component-value">0.038</span>
                </div>
                <div class="component-row">
                    <span class="component-name">Size Diversity:</span>
                    <span class="component-value">0.059</span>
                </div>
                <div class="component-row">
                    <span class="component-name">Vote Closeness Factor:</span>
                    <span class="component-value">0.886</span>
                </div>
                <div class="component-row">
                  <span class="component-name">Calculation:</span>
                  <span class="component-value">0.5 * [(0.5 * 0.25) + (0.3 * 0.038) + (0.2 * 0.059)] + 0.5 * 0.886</span>
                </div>
                <div class="final-score">
                    Final Score: 0.517
                </div>
              </div>
            
              <div class="example-box">
                <div class="example-title">Curry Example:</div>
                <div class="component-row">
                    <span class="component-name">Category Factor:</span>
                    <span class="component-value">0.25</span>
                </div>
                <div class="component-row">
                    <span class="component-name">Mention Factor:</span>
                    <span class="component-value">0.793</span>
                </div>
                <div class="component-row">
                    <span class="component-name">Size Diversity:</span>
                    <span class="component-value">0.0</span>
                </div>
                <div class="component-row">
                    <span class="component-name">Vote Closeness Factor:</span>
                    <span class="component-value">0.012</span>
                </div>
                <div class="component-row">
                    <span class="component-name">Calculation:</span>
                    <span class="component-value">0.5 * [(0.5 * 0.25) + (0.3 * 0.793) + (0.2 * 0.0)] + 0.5 * 0.012</span>
                </div>
                <div class="final-score">
                    Final Score: 0.187
                </div>
            </div>
            
            <p><strong>Key Insights:</strong> Hot dog (0.517) has a higher controversy score than curry (0.187), primarily due to the vote closeness factor (0.886) from survey responses to questions about whether a hot dog is a sandwich.</p>
            
            <div class="example-box">
                <div class="example-title">Related Survey Questions:</div>
                <ul>
                    <li><strong>Q1:</strong> "Is a hot dog a sandwich?"</li>
                    <li><strong>Q2:</strong> "If the bottom of a hot dog bun rips, resulting in two separate pieces of bread containing the sausage, would it now be considered a sandwich?"</li>
                    <li><strong>Q6:</strong> "Is cereal with milk a type of soup?"</li>
                    <li><strong>Q8:</strong> "Would you classify a curry as a type of soup, like stew or chowder? Why or why not?"</li>
                    <li><strong>Q9:</strong> "If two pieces of pizza are put together crust-sides out, is that a sandwich? Why or why not?"</li>
                </ul>
            </div>
        </div>
      </div>
    <script>
      // Demographic data for different groups by question
      const demographicData = {
          "Q1": {
            "ALL": {
              "labels": [
                "\u274c No (62.5%)",
                "\u2705 Yes (28.9%)",
                "\ud83e\udd14 It depends (7.6%)",
                "\ud83d\udeab I refuse to answer (1.0%)"
              ],
              "data": [
                313,
                145,
                38,
                5
              ]
            },
            "GENDER": {
              "Female": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  166,
                  67,
                  22,
                  3
                ]
              },
              "Male": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  147,
                  78,
                  16,
                  2
                ]
              }
            },
            "REGION": {
              "ON": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  149,
                  73,
                  12,
                  4
                ]
              },
              "BC": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  57,
                  20,
                  11,
                  1
                ]
              },
              "SK": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  13,
                  5,
                  1
                ]
              },
              "MB": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  16,
                  7
                ]
              },
              "QC": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  13,
                  5,
                  2
                ]
              },
              "AB": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  36,
                  25,
                  8
                ]
              },
              "ATL": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  29,
                  10,
                  4
                ]
              }
            },
            "URBANRURAL": {
              "Rural": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  59,
                  16,
                  7
                ]
              },
              "Urban": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  254,
                  129,
                  31,
                  5
                ]
              }
            },
            "EDUCATION": {
              "Graduated from college/trade school": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  55,
                  44,
                  8
                ]
              },
              "Some university": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  35,
                  7,
                  4,
                  2
                ]
              },
              "Some college/trade school": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  25,
                  8,
                  2
                ]
              },
              "University graduate degree, such as a master's or PhD": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  40,
                  21,
                  7
                ]
              },
              "University undergraduate degree, such as a bachelor's degree": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  88,
                  35,
                  11,
                  2
                ]
              },
              "High school graduate": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  63,
                  25,
                  5,
                  1
                ]
              },
              "Some elementary or high school": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  7,
                  5,
                  1
                ]
              }
            },
            "HHINCOME": {
              "$100,000 to less than $150,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  68,
                  26,
                  6
                ]
              },
              "$50,000 to less than $100,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  90,
                  44,
                  11
                ]
              },
              "Don't know / Rather not say": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  45,
                  19,
                  4,
                  2
                ]
              },
              "$150,000 to less than $200,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83d\udeab I refuse to answer",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  25,
                  14,
                  2,
                  1
                ]
              },
              "Over $200,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  31,
                  11,
                  4,
                  1
                ]
              },
              "$25,000 to less than $50,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  33,
                  15,
                  6
                ]
              },
              "Under $25,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  21,
                  16,
                  6
                ]
              }
            },
            "ETHNICITYROLL23": {
              "White": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  265,
                  117,
                  27,
                  5
                ]
              },
              "First Nations": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  8,
                  5,
                  1
                ]
              },
              "Chinese": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  11,
                  7,
                  1
                ]
              },
              "Filipino": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  7,
                  3
                ]
              },
              "South Asian": {
                "labels": [
                  "\u274c No",
                  "\ud83e\udd14 It depends",
                  "\u2705 Yes"
                ],
                "data": [
                  7,
                  5,
                  4
                ]
              },
              "Latin American": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  4,
                  2,
                  1
                ]
              },
              "Black": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  8,
                  3,
                  1
                ]
              },
              "Multiple visible minorities": {
                "labels": [
                  "\ud83e\udd14 It depends",
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  2,
                  2,
                  1
                ]
              },
              "Southeast Asian": {
                "labels": [
                  "\u274c No"
                ],
                "data": [
                  1
                ]
              },
              "Arab/West Asian": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  1,
                  1
                ]
              },
              "East Asian": {
                "labels": [
                  "\u274c No"
                ],
                "data": [
                  1
                ]
              }
            },
            "VIZMINROLL23": {
              "Not a visible minority": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  273,
                  122,
                  28,
                  5
                ]
              },
              "Visible minority": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  40,
                  23,
                  10
                ]
              }
            },
            "PMARITALSTATUS": {
              "Married": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  153,
                  61,
                  14,
                  1
                ]
              },
              "Single, never married": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  77,
                  44,
                  15,
                  3
                ]
              },
              "Common law": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends",
                  "\ud83d\udeab I refuse to answer"
                ],
                "data": [
                  46,
                  15,
                  3,
                  1
                ]
              },
              "Widowed": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  9,
                  5,
                  3
                ]
              },
              "Divorced": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes",
                  "\ud83e\udd14 It depends"
                ],
                "data": [
                  21,
                  16,
                  3
                ]
              },
              "Separated": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  7,
                  4
                ]
              }
            }
          },
          "Q2": {
            "ALL": {
              "labels": [
                "\u274c No (55.7%)",
                "\u2705 Yes (44.3%)"
              ],
              "data": [
                279,
                222
              ]
            },
            "GENDER": {
              "Female": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  149,
                  109
                ]
              },
              "Male": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  130,
                  113
                ]
              }
            },
            "REGION": {
              "ON": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  127,
                  111
                ]
              },
              "BC": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  51,
                  38
                ]
              },
              "SK": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  11,
                  8
                ]
              },
              "MB": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  13,
                  10
                ]
              },
              "QC": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  11,
                  9
                ]
              },
              "AB": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  35,
                  34
                ]
              },
              "ATL": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  31,
                  12
                ]
              }
            },
            "URBANRURAL": {
              "Rural": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  57,
                  25
                ]
              },
              "Urban": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  222,
                  197
                ]
              }
            },
            "EDUCATION": {
              "Graduated from college/trade school": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  61,
                  46
                ]
              },
              "Some university": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  34,
                  14
                ]
              },
              "Some college/trade school": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  22,
                  13
                ]
              },
              "University graduate degree, such as a master's or PhD": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  37,
                  31
                ]
              },
              "University undergraduate degree, such as a bachelor's degree": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  74,
                  62
                ]
              },
              "High school graduate": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  59,
                  35
                ]
              },
              "Some elementary or high school": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  7,
                  6
                ]
              }
            },
            "HHINCOME": {
              "$100,000 to less than $150,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  59,
                  41
                ]
              },
              "$50,000 to less than $100,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  73,
                  72
                ]
              },
              "Don't know / Rather not say": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  38,
                  32
                ]
              },
              "$150,000 to less than $200,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  27,
                  15
                ]
              },
              "Over $200,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  28,
                  19
                ]
              },
              "$25,000 to less than $50,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  32,
                  22
                ]
              },
              "Under $25,000": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  22,
                  21
                ]
              }
            },
            "ETHNICITYROLL23": {
              "White": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  241,
                  173
                ]
              },
              "First Nations": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  8,
                  6
                ]
              },
              "Chinese": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  14,
                  5
                ]
              },
              "Filipino": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  6,
                  4
                ]
              },
              "South Asian": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  11,
                  5
                ]
              },
              "Latin American": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  5,
                  2
                ]
              },
              "Black": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  9,
                  3
                ]
              },
              "Multiple visible minorities": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  3,
                  2
                ]
              },
              "Southeast Asian": {
                "labels": [
                  "\u274c No"
                ],
                "data": [
                  1
                ]
              },
              "Arab/West Asian": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  1,
                  1
                ]
              },
              "East Asian": {
                "labels": [
                  "\u274c No"
                ],
                "data": [
                  1
                ]
              }
            },
            "VIZMINROLL23": {
              "Not a visible minority": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  249,
                  179
                ]
              },
              "Visible minority": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  43,
                  30
                ]
              }
            },
            "PMARITALSTATUS": {
              "Married": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  145,
                  84
                ]
              },
              "Single, never married": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  74,
                  65
                ]
              },
              "Common law": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  33,
                  32
                ]
              },
              "Widowed": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  9,
                  8
                ]
              },
              "Divorced": {
                "labels": [
                  "\u274c No",
                  "\u2705 Yes"
                ],
                "data": [
                  22,
                  18
                ]
              },
              "Separated": {
                "labels": [
                  "\u2705 Yes",
                  "\u274c No"
                ],
                "data": [
                  6,
                  5
                ]
              }
            }
          }
        };
    
    let currentQuestion = 'Q1'; // Default to Connected Bun (Q1)
    let currentDemographic = 'ALL'; // Default to All Respondents
    let currentSubgroup = null; // No subgroup by default
    let detailedSurveyChart = null;
    let chartHeight = 250; // Default chart height
    // Common colors for consistency
    const chartColors = {
        no: '#FF6B6B',
        uncertain: '#FFE66D',
        yes: '#4ECDC4'
    };
    
        // Progress bar
        window.onscroll = function() {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = (winScroll / height) * 100;
            document.getElementById("progressBar").style.width = scrolled + "%";
        };
        
        // Smooth scroll for the scroll down button
        document.getElementById("scrollDown").addEventListener("click", function() {
            window.scrollTo({
                top: window.innerHeight,
                behavior: 'smooth'
            });
        });
        
        document.addEventListener('DOMContentLoaded', function() {
            // Add custom styling to ensure chart containers are properly sized
            const style = document.createElement('style');
            style.textContent = `
                .chart-wrapper {
                    overflow: visible !important;
                    padding-bottom: 50px !important;
                    min-height: 300px !important;
                }
                
                .insights-body .chart-wrapper canvas {
                    max-height: 400px !important;
                }
                
                .insights-modal .insights-body {
                    overflow-x: auto !important;
                }
                
                #detailedSurveyChart {
                    max-width: 100%;
                    max-height: 350px !important;
                }
                
                .demographic-selector {
                    margin-bottom: 15px !important;
                }
                
                /* Add scrolling for modal content if needed */
                .insights-content {
                    overflow: auto;
                }
            `;
            document.head.appendChild(style);
            
            // Adjust chart container when modal is opened
            document.getElementById('openInsights')?.addEventListener('click', function() {
                setTimeout(function() {
                    const chartWrappers = document.querySelectorAll('.chart-wrapper');
                    chartWrappers.forEach(wrapper => {
                        wrapper.style.overflow = 'visible';
                        wrapper.style.paddingBottom = '50px';
                    });
                }, 100);
            });
        });

        // Add event listeners to resize charts when modal or tabs change
        document.addEventListener('DOMContentLoaded', function() {
          // Resize when modal opens
          document.getElementById('openInsights')?.addEventListener('click', function() {
            setTimeout(resizeChartsInModal, 300);
          });
          
          // Resize when tabs change
          const tabs = document.querySelectorAll('.insights-tab');
          tabs.forEach(tab => {
            tab.addEventListener('click', function() {
              setTimeout(resizeChartsInModal, 300);
            });
          });
          
          // Resize when window resizes
          window.addEventListener('resize', function() {
            if (document.querySelector('.insights-modal.active')) {
              resizeChartsInModal();
            }
          });
          
          // Ensure charts resize properly when demographic or mode toggles change
          document.getElementById('demographicModeToggle')?.addEventListener('change', function() {
            setTimeout(resizeChartsInModal, 300);
          });
          
          document.getElementById('demographicFilter')?.addEventListener('change', function() {
            setTimeout(resizeChartsInModal, 300);
          });
        });

        // Animation on scroll
        document.addEventListener("DOMContentLoaded", function() {
            // 3D Hot Dog Visualization
            let scene, camera, renderer, hotdogGroup;
            let bunTop, bunBottom, sausage, bunWrap;
            let isSandwichMode = false;
            let isAnimating = false;
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };

            // Setup the scene
            function init3DHotdog() {
                // Create scene
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0xf7fff7);
                
                // Create camera
                camera = new THREE.PerspectiveCamera(75, document.getElementById('hotdog3dContainer').offsetWidth / 450, 0.1, 1000);
                camera.position.z = 7;
                
                // Create renderer
                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(document.getElementById('hotdog3dContainer').offsetWidth, 450);
                document.getElementById('hotdog3dContainer').appendChild(renderer.domElement);
                
                // Add lights
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
                scene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(1, 1, 1);
                scene.add(directionalLight);
                
                // Create hotdog group
                hotdogGroup = new THREE.Group();
                scene.add(hotdogGroup);
                
                // Create sausage (cylinder)
                const sausageGeometry = new THREE.CylinderGeometry(0.5, 0.5, 5.5, 32);
                const sausageMaterial = new THREE.MeshLambertMaterial({ color: 0xD35400 });
                sausage = new THREE.Mesh(sausageGeometry, sausageMaterial);
                sausage.rotation.z = Math.PI / 2; // Rotate to horizontal position
                hotdogGroup.add(sausage);

                function createHollowHotdogBun() {
                    // Parameters for the bun
                    const outerRadius = 1.0;
                    const innerRadius = 0.6;
                    const height = 5.5;
                    const thetaStart = Math.PI * 0.75;
                    const thetaLength = Math.PI * 1.5;
                    
                    // Create a group to hold the bun
                    const bunGroup = new THREE.Group();
                    
                    // Material for the bun with a bread-like color
                    const bunMaterial = new THREE.MeshLambertMaterial({ 
                        color: 0xF5CF87,
                        side: THREE.DoubleSide
                    });
                    
                    // Create a 2D shape for the cross-section of the bun
                    const bunShape = new THREE.Shape();
                    
                    // Start from the inner edge at thetaStart
                    bunShape.moveTo(
                        innerRadius * Math.cos(thetaStart), 
                        innerRadius * Math.sin(thetaStart)
                    );
                    
                    // Draw the inner arc
                    for (let angle = thetaStart; angle <= thetaStart + thetaLength; angle += 0.05) {
                        bunShape.lineTo(
                            innerRadius * Math.cos(angle), 
                            innerRadius * Math.sin(angle)
                        );
                    }
                    
                    // Draw the line connecting inner to outer at the end
                    bunShape.lineTo(
                        outerRadius * Math.cos(thetaStart + thetaLength),
                        outerRadius * Math.sin(thetaStart + thetaLength)
                    );
                    
                    // Draw the outer arc (going backwards)
                    for (let angle = thetaStart + thetaLength; angle >= thetaStart; angle -= 0.05) {
                        bunShape.lineTo(
                            outerRadius * Math.cos(angle), 
                            outerRadius * Math.sin(angle)
                        );
                    }
                    
                    // Close the shape
                    bunShape.closePath();
                    
                    // Create the extrusion path (straight line along Z axis)
                    const extrudePath = new THREE.LineCurve3(
                        new THREE.Vector3(0, 0, -height/2),
                        new THREE.Vector3(0, 0, height/2)
                    );
                    
                    // Create the extruded geometry
                    const bunGeometry = new THREE.ExtrudeGeometry(bunShape, {
                        steps: 1,
                        extrudePath: extrudePath,
                        bevelEnabled: false
                    });
                    
                    // Create the mesh
                    const bunMesh = new THREE.Mesh(bunGeometry, bunMaterial);
                    bunGroup.add(bunMesh);
                    
                    // Rotate and position the bun
                    // Change rotation to align with sausage by rotating 90 degrees differently
                    bunGroup.rotation.x = 0;
                    bunGroup.rotation.z = Math.PI;
                    bunGroup.rotation.y = Math.PI/2; // Rotate 90 degrees around y-axis
                    bunGroup.position.y = -0.3;
                    
                    return bunGroup;
                }

                // In your init3DHotdog function, replace the bunWrap creation with:
                bunWrap = createHollowHotdogBun();
                hotdogGroup.add(bunWrap);

                // Reposition sausage to ensure it's inside the bun
                sausage.position.y = -0.3; // Same vertical position as bun
                // Create sandwich bread pieces (flatter, will be hidden initially)
                // Top bread slice
                const bunTopGeometry = new THREE.BoxGeometry(5.5, 0.5, 2);
                const bunTopMaterial = new THREE.MeshLambertMaterial({ color: 0xF5CF87 });
                bunTop = new THREE.Mesh(bunTopGeometry, bunTopMaterial);
                bunTop.position.y = 0.3;  // Moved down - was 0.5
                bunTop.visible = false;
                hotdogGroup.add(bunTop);

                // Bottom bread slice
                const bunBottomGeometry = new THREE.BoxGeometry(5.5, 0.5, 2);
                const bunBottomMaterial = new THREE.MeshLambertMaterial({ color: 0xF5CF87 });
                bunBottom = new THREE.Mesh(bunBottomGeometry, bunBottomMaterial);
                bunBottom.position.y = -0.9;  // Moved down - was -0.5
                bunBottom.visible = false;
                hotdogGroup.add(bunBottom);
                                
                // Initial rotation for better view
                hotdogGroup.rotation.x = 0;
                hotdogGroup.rotation.y = Math.PI/3;
                // Setup dragging functionality
                const container = document.getElementById('hotdog3dContainer');
                
                container.addEventListener('mousedown', onMouseDown);
                container.addEventListener('mousemove', onMouseMove);
                container.addEventListener('mouseup', onMouseUp);
                container.addEventListener('mouseleave', onMouseUp);
                
                // Touch events for mobile
                container.addEventListener('touchstart', onTouchStart);
                container.addEventListener('touchmove', onTouchMove);
                container.addEventListener('touchend', onTouchEnd);
                
                // Start animation loop
                animate();
                
                // Handle window resize
                window.addEventListener('resize', onWindowResize);
            }

            function onMouseDown(event) {
                isDragging = true;
                previousMousePosition = {
                    x: event.clientX,
                    y: event.clientY
                };
                document.getElementById('hotdog3dContainer').style.cursor = 'grabbing';
            }

            function onMouseMove(event) {
                if (!isDragging || isAnimating) return;
                
                const deltaMove = {
                    x: event.clientX - previousMousePosition.x,
                    y: event.clientY - previousMousePosition.y
                };
                
                const rotationSpeed = 0.005;
                
                hotdogGroup.rotation.y += deltaMove.x * rotationSpeed;
                hotdogGroup.rotation.x += deltaMove.y * rotationSpeed;
                
                // Keep rotation within reasonable limits for x-axis
                hotdogGroup.rotation.x = Math.max(-Math.PI/2, Math.min(Math.PI/2, hotdogGroup.rotation.x));
                
                previousMousePosition = {
                    x: event.clientX,
                    y: event.clientY
                };
            }

            function onMouseUp() {
                isDragging = false;
                document.getElementById('hotdog3dContainer').style.cursor = 'grab';
            }

            // Touch event handlers
            function onTouchStart(event) {
                if (event.touches.length === 1) {
                    isDragging = true;
                    previousMousePosition = {
                        x: event.touches[0].clientX,
                        y: event.touches[0].clientY
                    };
                }
            }

            function onTouchMove(event) {
                if (!isDragging || isAnimating || event.touches.length !== 1) return;
                
                const deltaMove = {
                    x: event.touches[0].clientX - previousMousePosition.x,
                    y: event.touches[0].clientY - previousMousePosition.y
                };
                
                const rotationSpeed = 0.005;
                
                hotdogGroup.rotation.y += deltaMove.x * rotationSpeed;
                hotdogGroup.rotation.x += deltaMove.y * rotationSpeed;
                
                // Keep rotation within reasonable limits for x-axis
                hotdogGroup.rotation.x = Math.max(-Math.PI/2, Math.min(Math.PI/2, hotdogGroup.rotation.x));
                
                previousMousePosition = {
                    x: event.touches[0].clientX,
                    y: event.touches[0].clientY
                };
            }

            function onTouchEnd() {
                isDragging = false;
            }

            function onWindowResize() {
                camera.aspect = document.getElementById('hotdog3dContainer').offsetWidth / 450;
                camera.updateProjectionMatrix();
                renderer.setSize(document.getElementById('hotdog3dContainer').offsetWidth, 450);
            }

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }

            function transformToSandwich() {
                if (isAnimating) return;
                isAnimating = true;
                
                const duration = 1000; // ms
                const startTime = Date.now();
                
                function animateTransform() {
                    const elapsedTime = Date.now() - startTime;
                    const progress = Math.min(elapsedTime / duration, 1);
                    
                    // Easing function for smooth animation
                    const easeProgress = 1 - Math.pow(1 - progress, 3);
                    
                    if (!isSandwichMode) {
                        // Transforming to sandwich mode
                        bunWrap.scale.set(1 - easeProgress, 1 - easeProgress, 1 - easeProgress);
                        bunTop.visible = true;
                        bunBottom.visible = true;
                        
                        // Start from closer positions and move slightly apart for better visibility
                        bunTop.position.y = 0.35 + (easeProgress * 0.1);  // Updated from 0.55 to match new initial position
                        bunBottom.position.y = -0.95 - (easeProgress * 0.1);  // Updated from -0.55 to match new initial position
                        
                        bunTop.scale.set(1, easeProgress, 1);
                        bunBottom.scale.set(1, easeProgress, 1);
                    } else {
                        // Transforming back to hot dog mode
                        bunWrap.scale.set(easeProgress, easeProgress, easeProgress);
                        
                        // Keep bread slices closer to the sausage during transformation
                        bunTop.position.y = 0.25 - (easeProgress * 0.1);  // Updated from 0.65 to match new initial position
                        bunBottom.position.y = -1.05 + (easeProgress * 0.1);  // Updated from -0.65 to match new initial position
                        
                        bunTop.scale.set(1, 1 - easeProgress, 1);
                        bunBottom.scale.set(1, 1 - easeProgress, 1);
                        
                        // Hide the top and bottom once they're fully transformed back
                        if (progress === 1) {
                            bunTop.visible = false;
                            bunBottom.visible = false;
                        }
                    }
                    
                    if (progress < 1) {
                        requestAnimationFrame(animateTransform);
                    } else {
                        isAnimating = false;
                        isSandwichMode = !isSandwichMode;
                        document.getElementById('toggleLabel').textContent = isSandwichMode ? 'Sandwich Mode' : 'Hot Dog Mode';
                    }
                }
                
                animateTransform();
            }

            // Initialize 3D visualization
            init3DHotdog();

            // Event listener for transform button
            document.getElementById('toggleButton').addEventListener('click', transformToSandwich);
            
            // Get modal references
            const openInsights = document.getElementById('openInsights');
            const closeInsights = document.getElementById('closeInsights');
            const insightsModal = document.getElementById('insightsModal');

            // Create a variable to track whether the modal is open
            let isModalOpen = false;

            // Define the checkScroll function with modal awareness
            function checkScroll() {
                // Skip animation checking when modal is open
                if (isModalOpen) return;
                
                const elements = document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right, .scale-in');
                const windowHeight = window.innerHeight;
                
                elements.forEach(element => {
                    const elementPosition = element.getBoundingClientRect().top;
                    if (elementPosition < windowHeight - 100) {
                        element.classList.add('active');
                    }
                });
            }

            // Initial check
            checkScroll();

            // Add event listener for scroll
            window.addEventListener('scroll', checkScroll);
            window.originalResizeChartsInModal = window.resizeChartsInModal;
            window.resizeChartsInModal = function() {
                // Call the original function first
                if (window.originalResizeChartsInModal) {
                    window.originalResizeChartsInModal();
                }
                
                // Additional handling for detailedSurveyChart
                const canvas = document.getElementById('detailedSurveyChart');
                if (canvas && detailedSurveyChart) {
                    // Ensure that other charts maintain their heights
                    if (currentDemographic === 'ALL' || currentSubgroup) {
                        canvas.style.height = chartHeight + 'px';
                    } else {
                        // Dynamic height for demographic breakdowns
                        const subgroups = Object.keys(demographicData[currentQuestion][currentDemographic]);
                        const dynamicHeight = Math.max(chartHeight, 30 * subgroups.length + 150);
                        canvas.style.height = dynamicHeight + 'px';
                    }
                    
                    // Force chart update to ensure proper rendering
                    detailedSurveyChart.update();
                }
            };

            // Modal event listeners
            openInsights.addEventListener('click', function() {
                insightsModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                isModalOpen = true; // Set the modal state to open
                
                // Initialize detailed charts if they haven't been created yet
                if (!window.detailedChartsInitialized) {
                    initializeDetailedCharts();
                    window.detailedChartsInitialized = true;
                }
                
                // Call resize after a short delay to ensure charts render properly
                setTimeout(resizeChartsInModal, 100);
            });

            closeInsights.addEventListener('click', function() {
                insightsModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                isModalOpen = false; // Set the modal state to closed
            });

            // Close modal when clicking outside of content
            insightsModal.addEventListener('click', function(e) {
                if (e.target === insightsModal) {
                    insightsModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                    isModalOpen = false; // Set the modal state to closed
                }
            });
            
            // Animate controversy meter
            setTimeout(() => {
                document.getElementById('controversyFill').style.width = '51.7%';
            }, 1000);
            
            // Chart.js implementation
            // Survey Results Chart
            // Survey Results Chart
            const surveyCtx = document.getElementById('surveyChart').getContext('2d');
            let currentMode = 'hotdog'; // Default mode

            // Chart data for both modes
            const chartData = {
                hotdog: {
                    labels: ['\u274c No (62.5%)', '\ud83e\udd14 It depends (7.6%)', '\u2705 Yes (28.9%)', '\ud83d\udeab Refuse (1.0%)'],
                    datasets: [{
                        data: [313, 38, 145, 5],
                        backgroundColor: [
                            '#FF6B6B',
                            '#FFE66D', 
                            '#4ECDC4',
                            '#cccccc'
                        ],
                        borderWidth: 0
                    }],
                    title: 'Is a Hot Dog a Sandwich? Survey Results'
                },
                sandwich: {
                    labels: ['\u274c No (55.7%)', '\u2705 Yes (44.3%)'],
                    datasets: [{
                        data: [279, 222],
                        backgroundColor: [
                            '#FF6B6B',
                            '#4ECDC4'
                        ],
                        borderWidth: 0
                    }],
                    title: 'Is a Hot Dog a Sandwich? Survey Results'
                }
            };

            // Initialize the survey chart
            const surveyChart = new Chart(surveyCtx, {
                type: 'pie',
                data: chartData['hotdog'],
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        title: {
                            display: true,
                            text: chartData['hotdog'].title,
                            font: {
                                size: 16
                            }
                        }
                    }
                }
            });

            // Mode toggle functionality
            document.getElementById('modeToggle').addEventListener('change', function() {
              
                currentMode = this.checked ? 'sandwich' : 'hotdog';
                // Update chart data
                surveyChart.data = chartData[currentMode];
                // Update chart title
                surveyChart.options.plugins.title.text = chartData[currentMode].title;
                
                // Update chart
                surveyChart.update();
            });
            
            // Controversy Score Chart
            const controversyCtx = document.getElementById('controversyChart').getContext('2d');
            const controversyChart = new Chart(controversyCtx, {
                type: 'bar',
                data: {
                    labels: ['Hot Dog', 'Taco', 'Calzone', 'Stew', 'Curry', 'Cereal w/Milk', 'Open-faced Sandwich', 'Pizza Sandwich'],
                    datasets: [{
                        label: 'Controversy Score',
                        data: [0.517, 0.437, 0.251, 0.212, 0.187, 0.159, 0.140, 0.088],
                        backgroundColor: '#1A535C',
                        borderWidth: 0
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 0.6,
                            title: {
                                display: true,
                                text: 'Controversy Score (0-1)'
                            }
                        }
                    }
                }
            });
            
            // Perspective Chart
            const perspectiveCtx = document.getElementById('perspectiveChart').getContext('2d');
            const perspectiveChart = new Chart(perspectiveCtx, {
                type: 'bar',
                data: {
                    labels: [
                        'Sandwich Traditionalist', 
                        'Sandwich Expansionist', 
                        'Sandwich Moderate',
                        'Form-Over-Intent',
                        'Creator-Intent',
                        'Intent Moderate'
                    ],
                    datasets: [{
                        label: 'Number of Respondents',
                        data: [290, 125, 86, 162, 153, 186],
                        backgroundColor: [
                            '#FF6B6B',
                            '#FF8E72',
                            '#FFD166',
                            '#4ECDC4',
                            '#1A535C',
                            '#6C757D'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Food Classification Perspectives',
                            font: {
                                size: 16
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Tab functionality
            const tabs = document.querySelectorAll('.insights-tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // Also add resize handling for tab changes
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and its corresponding content
                    this.classList.add('active');
                    const tabId = this.dataset.tab + 'Tab';
                    document.getElementById(tabId).classList.add('active');
                    
                    // Resize charts in the newly active tab
                    setTimeout(resizeChartsInModal, 100);
                });
            });

            // Add window resize handler to keep charts properly sized
            window.addEventListener('resize', function() {
                if (isModalOpen) {
                    resizeChartsInModal();
                }
            });

            function resizeChartsInModal() {
                // Wait for charts to be ready
                setTimeout(function() {
                  // Get all chart canvases in the modal
                  const chartCanvases = document.querySelectorAll('.insights-modal canvas');
                  
                  // Force resize for each chart
                  chartCanvases.forEach(canvas => {
                    // Get chart instance from canvas
                    const chart = Chart.getChart(canvas);
                    if (chart) {
                      chart.resize();
                    }
                  });
                  
                  // Special handling for demographic chart
                  const demographicChart = document.getElementById('detailedSurveyChart');
                  if (demographicChart) {
                    const chart = Chart.getChart(demographicChart);
                    if (chart) {
                      // Apply demographic-specific sizing
                      if (currentDemographic !== 'ALL' && !currentSubgroup) {
                        const subgroups = Object.keys(demographicData[currentQuestion][currentDemographic]);
                        const dynamicHeight = Math.max(chartHeight, 30 * subgroups.length + 150);
                        demographicChart.style.height = dynamicHeight + 'px';
                      } else {
                        demographicChart.style.height = chartHeight + 'px';
                      }
                      chart.resize();
                    }
                  }
                }, 100);
              }
            function initializeDetailedCharts() {
                // Detailed Survey Chart (Hot Dog Sandwich)
                let currentQuestion = 'Q1'; // Default to Connected Bun (Q1)
                let currentDemographic = 'ALL'; // Default to All Respondents
                let currentSubgroup = null; // No subgroup by default
                let detailedSurveyChart = null;
                let chartHeight = 250; // Default chart height
                
                // Create chart with default data
                const detailedSurveyCtx = document.getElementById('detailedSurveyChart').getContext('2d');
                initDetailedChart();
                
                // Initialize the chart with current settings
                function initDetailedChart() {
                    const initialData = demographicData[currentQuestion][currentDemographic];
                    
                    // If we already have a chart, destroy it first
                    if (detailedSurveyChart) {
                        detailedSurveyChart.destroy();
                    }
                    
                    // Create new chart
                    detailedSurveyChart = new Chart(detailedSurveyCtx, {
                        type: 'pie',
                        data: {
                            labels: initialData.labels,
                            datasets: [{
                                data: initialData.data,
                                backgroundColor: currentQuestion === 'Q1' 
                                    ? [chartColors.no, chartColors.uncertain, chartColors.yes, '#cccccc']
                                    : [chartColors.no, chartColors.yes],
                                borderWidth: 1,
                                borderColor: '#ffffff'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        display: false // This removes the horizontal grid lines
                                    },
                                    display: false // This hides the axis completely - optional
                                },
                                x: {
                                    grid: {
                                        display: false // This removes vertical grid lines
                                    },
                                    display: false // This hides the axis completely - optional
                                }
                            },
                            plugins: {
                                legend: {
                                    position: 'right',
                                    labels: {
                                        generateLabels: function(chart) {
                                            const data = chart.data;
                                            if (data.labels.length && data.datasets.length) {
                                                return data.labels.map(function(label, i) {
                                                    return {
                                                        text: label,
                                                        fillStyle: chart.data.datasets[0].backgroundColor[i],
                                                        hidden: false,
                                                        index: i
                                                    };
                                                });
                                            }
                                            return [];
                                        }
                                    }
                                },
                                title: {
                                    display: true,
                                    text: currentQuestion === 'Q1' 
                                        ? 'Connected Bun Results - All Respondents' 
                                        : 'Separated Bun Results - All Respondents',
                                    font: {
                                        size: 16
                                    }
                                }
                            }
                        }
                    });
                }
                
                // Add event listener for bun mode toggle
                document.getElementById('demographicModeToggle').addEventListener('change', function() {
                    currentQuestion = this.checked ? 'Q2' : 'Q1';
                    
                    // Reset to default view when changing questions
                    if (currentDemographic !== 'ALL') {
                        // Keep the demographic category but reset subgroup
                        currentSubgroup = null;
                        
                        // Recreate subgroup selector with new question options
                        if (document.getElementById('subgroupSelector')) {
                            createSubgroupSelector();
                        }
                    }
                    
                    updateChart();
                });
                
                // Add event listener for demographic filter
                document.getElementById('demographicFilter').addEventListener('change', function() {
                    currentDemographic = this.value;
                    currentSubgroup = null; // Reset subgroup when changing demographic
                    
                    // If a specific demographic is selected (not ALL), create subgroup selector
                    if (currentDemographic !== 'ALL') {
                        createSubgroupSelector();
                    } else {
                        // Remove subgroup selector if ALL is selected
                        const existingSubgroupSelector = document.getElementById('subgroupSelector');
                        if (existingSubgroupSelector) {
                            existingSubgroupSelector.remove();
                        }
                    }
                    
                    updateChart();
                });
                
                // Function to create subgroup selector
                function createSubgroupSelector() {
                    // Remove existing selector if any
                    const existingSelector = document.getElementById('subgroupSelector');
                    if (existingSelector) {
                        existingSelector.remove();
                    }
                    
                    // Create new selector
                    const selectorContainer = document.createElement('div');
                    selectorContainer.id = 'subgroupSelector';
                    selectorContainer.className = 'demographic-selector';
                    
                    const label = document.createElement('label');
                    label.htmlFor = 'subgroup';
                    label.textContent = `Select ${currentDemographic}:`;
                    
                    const select = document.createElement('select');
                    select.id = 'subgroup';
                    
                    // Add option for All in this demographic
                    const allOption = document.createElement('option');
                    allOption.value = 'ALL';
                    allOption.textContent = `All ${currentDemographic}`;
                    select.appendChild(allOption);
                    
                    // Add options for each subgroup
                    const subgroups = Object.keys(demographicData[currentQuestion][currentDemographic]);
                    subgroups.forEach(subgroup => {
                        const option = document.createElement('option');
                        option.value = subgroup;
                        option.textContent = subgroup;
                        select.appendChild(option);
                    });
                    
                    // Add event listener
                    select.addEventListener('change', function() {
                        currentSubgroup = this.value === 'ALL' ? null : this.value;
                        updateChart();
                    });
                    
                    selectorContainer.appendChild(label);
                    selectorContainer.appendChild(select);
                    
                    // Insert after the demographic filter
                    const demographicFilter = document.getElementById('demographicFilter').parentNode;
                    demographicFilter.parentNode.insertBefore(selectorContainer, demographicFilter.nextSibling);
                }
                
                // Function to update chart based on current selections
                function updateChart() {
                    let chartData, chartTitle;
                    
                    if (currentDemographic === 'ALL') {
                        // Show overall data
                        chartData = demographicData[currentQuestion][currentDemographic];
                        chartTitle = currentQuestion === 'Q1' 
                            ? 'Connected Bun Results - All Respondents' 
                            : 'Separated Bun Results - All Respondents';
                            
                        // Always recreate the chart to ensure proper rendering
                        detailedSurveyChart.destroy();
                        
                        detailedSurveyChart = new Chart(detailedSurveyCtx, {
                            type: 'pie',  // Change to pie chart for overall view
                            data: {
                                labels: chartData.labels,
                                datasets: [{
                                    data: chartData.data,
                                    backgroundColor: currentQuestion === 'Q1' 
                                        ? [chartColors.no, chartColors.uncertain, chartColors.yes, '#cccccc']
                                        : [chartColors.no, chartColors.yes],
                                    borderWidth: 1,
                                    borderColor: '#ffffff'
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    x: {
                                        display: false,
                                        grid: {
                                            display: false
                                        }
                                    },
                                    y: {
                                        display: false,
                                        grid: {
                                            display: false
                                        }
                                    }
                                },
                                plugins: {
                                    legend: {
                                        position: 'right'
                                    },
                                    title: {
                                        display: true,
                                        text: chartTitle,
                                        font: {
                                            size: 16
                                        }
                                    }
                                }
                            }
                        });
                        
                        // Set chart container to standard height
                        document.getElementById('detailedSurveyChart').style.height = chartHeight + 'px';
                        
                    } else if (currentSubgroup) {
                        // Show specific subgroup data
                        chartData = demographicData[currentQuestion][currentDemographic][currentSubgroup];
                        chartTitle = `${currentQuestion === 'Q1' ? 'Connected' : 'Separated'} Bun - ${currentDemographic}: ${currentSubgroup}`;
                        
                        // Always recreate the chart to ensure proper rendering
                        detailedSurveyChart.destroy();
                        
                        detailedSurveyChart = new Chart(detailedSurveyCtx, {
                            type: 'pie',  // Use pie chart for single subgroup
                            data: {
                                labels: chartData.labels,
                                datasets: [{
                                    data: chartData.data,
                                    backgroundColor: currentQuestion === 'Q1' 
                                        ? [chartColors.no, chartColors.uncertain, chartColors.yes]
                                        : [chartColors.no, chartColors.yes],
                                    borderWidth: 1,
                                    borderColor: '#ffffff'
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    x: {
                                        display: false,
                                        grid: {
                                            display: false
                                        }
                                    },
                                    y: {
                                        display: false,
                                        grid: {
                                            display: false
                                        }
                                    }
                                },
                                plugins: {
                                    legend: {
                                        position: 'right'
                                    },
                                    title: {
                                        display: true,
                                        text: chartTitle,
                                        font: {
                                            size: 16
                                        }
                                    }
                                }
                            }
                        });
                        
                        // Set chart container to standard height
                        document.getElementById('detailedSurveyChart').style.height = chartHeight + 'px';
                        
                    } else {
                        // Show comparison of all subgroups for this demographic
                        const subgroups = Object.keys(demographicData[currentQuestion][currentDemographic]);
                        
                        // Always recreate the chart to avoid leftovers from previous views
                        detailedSurveyChart.destroy();
                        
                        // Get answer options from first subgroup
                        const options = demographicData[currentQuestion][currentDemographic][subgroups[0]].labels;
                        
                        // Create datasets for each answer option
                        const datasets = [];
                        options.forEach((option, optionIndex) => {
                            const dataset = {
                                label: option,
                                data: [],
                                backgroundColor: optionIndex === 0 ? chartColors.no : 
                                    (optionIndex === 1 && currentQuestion === 'Q1' ? chartColors.uncertain : chartColors.yes),
                                borderWidth: 1,
                                borderColor: '#ffffff'
                            };
                            
                            // Collect data for this answer across subgroups
                            subgroups.forEach(subgroup => {
                                const subgroupData = demographicData[currentQuestion][currentDemographic][subgroup].data;
                                dataset.data.push(subgroupData[optionIndex] || 0);
                            });
                            
                            datasets.push(dataset);
                        });
                        
                        // Calculate dynamic height based on number of subgroups
                        // Use at least chartHeight but increase for more subgroups
                        const dynamicHeight = Math.max(chartHeight, 30 * subgroups.length + 150);
                        document.getElementById('detailedSurveyChart').style.height = dynamicHeight + 'px';
                        
                        detailedSurveyChart = new Chart(detailedSurveyCtx, {
                            type: 'bar',
                            data: {
                                labels: subgroups,
                                datasets: datasets
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                indexAxis: subgroups.length > 4 ? 'y' : 'x', // Use horizontal bars for many categories
                                scales: {
                                    x: {
                                        stacked: true,
                                        grid: {
                                            display: false // Remove grid lines
                                        },
                                        ticks: {
                                            autoSkip: false,
                                            maxRotation: 45,
                                            minRotation: 45
                                        }
                                    },
                                    y: {
                                        stacked: true,
                                        beginAtZero: true,
                                        grid: {
                                            display: false // Remove grid lines
                                        }
                                    }
                                },
                                plugins: {
                                    legend: {
                                        position: 'top'
                                    },
                                    title: {
                                        display: true,
                                        text: `${currentQuestion === 'Q1' ? 'Connected' : 'Separated'} Bun Responses by ${currentDemographic}`,
                                        font: {
                                            size: 16
                                        }
                                    }
                                }
                            }
                        });
                    }
                }
                
                // Word Frequency Chart
                const wordFrequencyCtx = document.getElementById('wordFrequencyChart').getContext('2d');
                new Chart(wordFrequencyCtx, {
                    type: 'bar',
                    data: {
                        labels: ['pizza', 'sandwich', 'soup', 'curry', 'stew', 'would', 'like', 'two', 'pieces', 'chowder'],
                        datasets: [{
                            label: 'Frequency',
                            data: [1373, 1283, 1238, 1227, 1151, 1008, 1000, 980, 964, 926],
                            backgroundColor: '#1A535C'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                title: {
                                    display: true,
                                    text: 'Frequency Count'
                                }
                            }
                        }
                    }
                });
                
                // Controversy Breakdown Chart
                const controversyBreakdownCtx = document.getElementById('controversyBreakdownChart').getContext('2d');
                new Chart(controversyBreakdownCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Hot Dog', 'Taco', 'Stew', 'Curry', 'Calzone', 'Cereal w/Milk', 'Pizza Sandwich', 'Open-faced Sandwich'],
                        datasets: [
                            {
                                label: 'Category Factor',
                                data: [0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25],
                                backgroundColor: '#4ECDC4'
                            },
                            {
                                label: 'Mention Factor',
                                data: [0.038, 1.0, 0.958, 0.793, 0.118, 0.005, 0.066, 0.009],
                                backgroundColor: '#FF6B6B'
                            },
                            {
                                label: 'Size Diversity',
                                data: [0.059, 0.059, 0.0, 0.0, 0.455, 0.0, 0.059, 0.059],
                                backgroundColor: '#FFE66D'
                            },
                            {
                                label: 'Vote Closeness Factor',
                                data: [0.886, 0.0, 0.012, 0.012, 0.0, 0.192, 0.020, 0.0],
                                backgroundColor: '#FB8500'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Food Item'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Component Score'
                                }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    footer: function(tooltipItems) {
                                        // Add explanation for vote closeness factor
                                        if (tooltipItems[0].datasetIndex === 3) {
                                            return 'Based on survey response closeness to 50/50 split';
                                        }
                                        return '';
                                    }
                                }
                            }
                        }
                    }
                });
                
                // Category Overlap Chart
                const categoryOverlapCtx = document.getElementById('categoryOverlapChart').getContext('2d');
                new Chart(categoryOverlapCtx, {
                    type: 'polarArea',
                    data: {
                        labels: ['Sandwich & Controversial', 'Soup & Controversial', 'Pizza & Controversial'],
                        datasets: [{
                            data: [4, 3, 1],
                            backgroundColor: [
                                'rgba(255, 107, 107, 0.6)',
                                'rgba(78, 205, 196, 0.6)',
                                'rgba(255, 230, 109, 0.6)'
                            ],
                            borderWidth: 1,
                            borderColor: '#ffffff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
                
                // Debate Intensity Chart
                const debateIntensityCtx = document.getElementById('debateIntensityChart').getContext('2d');
                new Chart(debateIntensityCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Cultural Factors', 'Structural Factors', 'Functional Factors', 'Name Etymology', 'Historical Context', 'Chef Intent'],
                        datasets: [
                            {
                                label: 'Hot Dog',
                                data: [8, 9, 6, 5, 7, 3],
                                backgroundColor: 'rgba(255, 107, 107, 0.3)',
                                borderColor: '#FF6B6B',
                                pointBackgroundColor: '#FF6B6B'
                            },
                            {
                                label: 'Taco',
                                data: [9, 8, 7, 6, 6, 4],
                                backgroundColor: 'rgba(78, 205, 196, 0.3)',
                                borderColor: '#4ECDC4',
                                pointBackgroundColor: '#4ECDC4'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                min: 0,
                                max: 10,
                                ticks: {
                                    stepSize: 2
                                }
                            }
                        }
                    }
                });
                
                const perspectivesDetailedCtx = document.getElementById('perspectivesDetailedChart').getContext('2d');
                new Chart(perspectivesDetailedCtx, {
                    type: 'bar',
                    data: {
                        labels: [
                            'Traditionalist + Form-Over-Intent',
                            'Traditionalist + Intent Moderate',
                            'Traditionalist + Creator-Intent',
                            'Moderate + Form-Over-Intent',
                            'Moderate + Intent Moderate',
                            'Moderate + Creator-Intent',
                            'Expansionist + Form-Over-Intent',
                            'Expansionist + Intent Moderate',
                            'Expansionist + Creator-Intent'
                        ],
                        datasets: [{
                            label: 'Number of Respondents',
                            data: [105, 111, 74, 23, 36, 27, 34, 39, 52],
                            backgroundColor: [
                                '#FF6B6B',
                                '#FF8E72', 
                                '#FFC3A0',
                                '#FFD166',
                                '#E9C46A',
                                '#F4A261',
                                '#4ECDC4',
                                '#2A9D8F',
                                '#1A535C'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    afterLabel: function(context) {
                                        const percentages = [
                                            "21%", "22%", "15%", "5%", "7%", "5%", "7%", "8%", "10%"
                                        ];
                                        return "Approximately " + percentages[context.dataIndex] + " of respondents";
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Number of Respondents'
                                }
                            }
                        }
                    }
                });
                
                // Criteria Importance Chart
                const criteriaImportanceCtx = document.getElementById('criteriaImportanceChart').getContext('2d');
                new Chart(criteriaImportanceCtx, {
                    type: 'radar',
                    data: {
                        labels: [
                            'Bread on Exterior',
                            'Contains Filling',
                            'Structural Integrity',
                            'Number of Bread Pieces',
                            'Bread Connectivity',
                            'Chef\'s Intent',
                            'Cultural Perception'
                        ],
                        datasets: [
                            {
                                label: 'Traditionalists',
                                data: [9, 8, 6, 9, 8, 3, 7],
                                backgroundColor: 'rgba(255, 107, 107, 0.3)',
                                borderColor: '#FF6B6B',
                                pointBackgroundColor: '#FF6B6B'
                            },
                            {
                                label: 'Moderates',
                                data: [8, 9, 7, 7, 6, 5, 6],
                                backgroundColor: 'rgba(255, 230, 109, 0.3)',
                                borderColor: '#FFE66D',
                                pointBackgroundColor: '#FFE66D'
                            },
                            {
                                label: 'Expansionists',
                                data: [7, 8, 8, 4, 3, 6, 5],
                                backgroundColor: 'rgba(78, 205, 196, 0.3)',
                                borderColor: '#4ECDC4',
                                pointBackgroundColor: '#4ECDC4'
                            },
                            {
                                label: 'Form-Over-Intent',
                                data: [8, 7, 8, 7, 7, 2, 6],
                                backgroundColor: 'rgba(41, 50, 65, 0.2)',
                                borderColor: '#293241',
                                pointBackgroundColor: '#293241',
                                borderDash: [5, 5]
                            },
                            {
                                label: 'Creator-Intent',
                                data: [5, 6, 5, 4, 3, 9, 5],
                                backgroundColor: 'rgba(239, 71, 111, 0.2)',
                                borderColor: '#EF476F',
                                pointBackgroundColor: '#EF476F',
                                borderDash: [5, 5]
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                min: 0,
                                max: 10,
                                ticks: {
                                    stepSize: 2
                                },
                                pointLabels: {
                                    font: {
                                        size: 12
                                    }
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: false,
                                text: 'Sandwich Criteria Importance by Perspective Group',
                                font: {
                                    size: 16,
                                    weight: 'bold'
                                }
                            },
                            legend: {
                                position: 'top',
                                labels: {
                                    usePointStyle: true,
                                    padding: 20
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': ' + context.raw + '/10';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Classification Framework Popup functionality
            const classificationInfoIcons = document.querySelectorAll('.info-icon-classification');
            const classificationPopup = document.getElementById('classificationPopup');
            const closeClassificationPopup = document.getElementById('closeClassificationPopup');

            if (classificationPopup && closeClassificationPopup) {
              classificationInfoIcons.forEach(icon => {
                  icon.addEventListener('click', function() {
                      classificationPopup.classList.add('active');
                      document.body.style.overflow = 'hidden';
                  });
              });
                closeClassificationPopup.addEventListener('click', function() {
                    classificationPopup.classList.remove('active');
                    document.body.style.overflow = 'auto';
                });
                
                classificationPopup.addEventListener('click', function(e) {
                    if (e.target === classificationPopup) {
                        classificationPopup.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    }
                });
            }
                      // Controversy Score Info Popup functionality
          const controversyInfoIcons = document.querySelectorAll('.info-icon');
          const controversyPopup = document.getElementById('controversyPopup');
          const closeControversyPopup = document.getElementById('closeControversyPopup');

          if (controversyPopup && closeControversyPopup) {
              controversyInfoIcons.forEach(icon => {
                  icon.addEventListener('click', function() {
                      controversyPopup.classList.add('active');
                      document.body.style.overflow = 'hidden';
                  });
              });
              
              closeControversyPopup.addEventListener('click', function() {
                  controversyPopup.classList.remove('active');
                  document.body.style.overflow = 'auto';
              });
              
              controversyPopup.addEventListener('click', function(e) {
                  if (e.target === controversyPopup) {
                      controversyPopup.classList.remove('active');
                      document.body.style.overflow = 'auto';
                  }
              });
          }
        });
        // Function to create confetti effect
        function createConfetti() {
            const confettiContainer = document.getElementById('confettiContainer');
            confettiContainer.style.display = 'block';
            
            // Confetti colors
            const colors = [
                '#FF6B6B', // var(--primary)
                '#4ECDC4', // var(--secondary)
                '#FFE66D', // var(--accent)
                '#1A535C', // var(--dark)
                '#F7FFF7'  // var(--light)
            ];
            
            // Create 150 confetti pieces
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                // Random position, size, color, shape and animation duration
                const size = Math.random() * 10 + 6; // 6-16px
                const xPos = Math.random() * 100; // 0-100%
                const animationDuration = Math.random() * 3 + 2; // 2-5s
                const colorIndex = Math.floor(Math.random() * colors.length);
                const shape = Math.random() > 0.5 ? '50%' : '0'; // circle or square
                
                confetti.style.left = `${xPos}%`;
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                confetti.style.backgroundColor = colors[colorIndex];
                confetti.style.borderRadius = shape;
                confetti.style.animationDuration = `${animationDuration}s`;
                
                confettiContainer.appendChild(confetti);
            }
            
            // Remove confetti after animation is complete (6 seconds is enough for all pieces to fall)
            setTimeout(() => {
                confettiContainer.innerHTML = '';
                confettiContainer.style.display = 'none';
            }, 6000);
        }
        
        // Show victory graphic and trigger confetti when reaching the verdict section
        document.addEventListener('DOMContentLoaded', function() {
            // Get references
            const verdictSection = document.getElementById('verdict');
            const verdictAnswer = document.querySelector('.verdict-answer');
            
            // Create an Intersection Observer to detect when verdict section is visible
            const verdictObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Add a slight delay to make sure the verdict answer is visible first
                        setTimeout(() => {
                            // Show victory graphic
                            const victoryGraphic = document.querySelector('.victory-graphic-container');
                            if (victoryGraphic) {
                                victoryGraphic.classList.add('active');
                            }
                            
                            // Trigger confetti
                            createConfetti();
                            
                            // Stop observing once triggered
                            verdictObserver.disconnect();
                        }, 800);
                    }
                });
            }, { threshold: 0.5 });
            
            // Start observing
            if (verdictSection) {
                verdictObserver.observe(verdictSection);
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            // Get video modal references
            const openVideo = document.getElementById('openVideo');
            const closeVideo = document.getElementById('closeVideo');
            const videoModal = document.getElementById('videoModal');
            const hotdogVideo = document.getElementById('hotdogVideo');
            
            // Open modal
            openVideo.addEventListener('click', function() {
                videoModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Reset video if it was previously played
                hotdogVideo.currentTime = 0;
                hotdogVideo.play();
            });
            
            // Close modal
            closeVideo.addEventListener('click', function() {
                videoModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                hotdogVideo.pause();
            });
            
            // Close modal when clicking outside of content
            videoModal.addEventListener('click', function(e) {
                if (e.target === videoModal) {
                    videoModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                    hotdogVideo.pause();
                }
            });
        });
        document.addEventListener('DOMContentLoaded', function() {
            // Get GPT modal references
            const openGPT = document.getElementById('openGPT');
            const closeGPT = document.getElementById('closeGPT');
            const gptModal = document.getElementById('gptModal');
            
            // Open modal
            openGPT.addEventListener('click', function() {
              //gptModal.classList.add('active');
              //document.body.style.overflow = 'hidden';
            });
            
            // Close modal
            closeGPT.addEventListener('click', function() {
              gptModal.classList.remove('active');
              document.body.style.overflow = 'auto';
            });
            
            // Close modal when clicking outside of content
            gptModal.addEventListener('click', function(e) {
              if (e.target === gptModal) {
                gptModal.classList.remove('active');
                document.body.style.overflow = 'auto';
              }
            });
          });
    </script>
    <div class="confetti-container" id="confettiContainer"></div>
</body>
</html>
